<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="en">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.3.0',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
  <meta name="description" content="Avenue to Jane!">
<meta property="og:type" content="website">
<meta property="og:title" content="AbsentM&#39;s Notes">
<meta property="og:url" content="https://absentm.github.io/index.html">
<meta property="og:site_name" content="AbsentM&#39;s Notes">
<meta property="og:description" content="Avenue to Jane!">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AbsentM&#39;s Notes">
<meta name="twitter:description" content="Avenue to Jane!">






  <link rel="canonical" href="https://absentm.github.io/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>AbsentM's Notes</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?021d64369b3c401c47c6ab7aa56f7074";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">AbsentM's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2018/03/18/一次由-python-for、while-else-语法糖引发的深度学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/18/一次由-python-for、while-else-语法糖引发的深度学习/" itemprop="url">
                  一次由 python for、while-else 语法糖引发的深度学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-03-18 13:44:29" itemprop="dateCreated datePublished" datetime="2018-03-18T13:44:29+08:00">2018-03-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-03-19 08:43:46" itemprop="dateModified" datetime="2018-03-19T08:43:46+08:00">2018-03-19</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python-Notes/" itemprop="url" rel="index"><span itemprop="name">Python Notes</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/03/18/一次由-python-for、while-else-语法糖引发的深度学习/" class="leancloud_visitors" data-flag-title="一次由 python for、while-else 语法糖引发的深度学习">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="故事"><a href="#故事" class="headerlink" title="故事"></a>故事</h2><p>昨儿，一天迷离。</p>
<p>手忙脚乱，写了一段代码；<br>误打误撞，通过了测试用例；<br>迷迷糊糊，提交入库了。</p>
<p>今儿醒来 review， 觉得是 bug， 结果却获得了意外…</p>
<p>因此就有了这个，一次由 python for/while-else 「 语法糖 」 引发的 「 深度学习 」。</p>
<p>故事开头是这样的：</p>
<p>判断一个「 , 」分割的字符串，如果是 None，则返回「 * 」；如果不是，则遍历验证每一个元素是否在列表中，不存在则错误输出，存在则返回列表。</p>
<p>非常简单的逻辑，可我写成了这个样子：</p>
<p><img src="https://o8zyn0sct.qnssl.com/python-loop-else-Q1.png" alt="Python loop with else Question"></p>
<p>写过一段 C/C++ 或者 Java 的我，review 时看到这个，瞬间懵逼了。</p>
<p>bug 呀，那个 else 不应该出现呀，缩进应该往前提一下呀，语法错误呀…</p>
<p>可是测试用例的处理逻辑却跑的没问题呀，二脸懵逼… </p>
<p>赶紧 Google…</p>
<h2 id="Python-for-while-else-语法"><a href="#Python-for-while-else-语法" class="headerlink" title="Python for/while-else 语法"></a>Python for/while-else 语法</h2><p>搜索文档才发现：</p>
<p><img src="https://o8zyn0sct.qnssl.com/python-loop-else-Q2.png" alt="Python loop with else doc"></p>
<p>Python 的 for…else 和 while…else 语法，是 Python 中最不常用、最为误解的语法特性之一。</p>
<p>Python 中的 for、while 循环都可以有一个可选的 else 分支（类似 if 语句和 try 语句那样），在循环迭代正常完成之后执行。也就是说，如果我们不是以非正常方式以外的其他任意方式退出循环，那么 else 分支将被执行。也就是在循环体内没有 break 语句、没有 return 语句，或者没有异常出现。</p>
<p>那么，写一个 demo 测试一下这个语法糖吧。</p>
<h2 id="Demo-测试"><a href="#Demo-测试" class="headerlink" title="Demo 测试"></a>Demo 测试</h2><p>把代码写成这样，验证一下这个语法糖。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"> # test_loop_with_else.py</span></span><br><span class="line"><span class="string"> # </span></span><br><span class="line"><span class="string"> # Copyright(C) By AbsentM. 2018</span></span><br><span class="line"><span class="string"> # </span></span><br><span class="line"><span class="string"> # Author: AbsentM</span></span><br><span class="line"><span class="string"> # Date: 2018/03/18</span></span><br><span class="line"><span class="string"> # </span></span><br><span class="line"><span class="string"> # Description: Test python loop with else demo</span></span><br><span class="line"><span class="string"> #</span></span><br><span class="line"><span class="string"> # Change Log:</span></span><br><span class="line"><span class="string"> # 2018/03/18 AbsentM Create the file</span></span><br><span class="line"><span class="string"> # 2018/03/18 AbsentM Add test demo</span></span><br><span class="line"><span class="string"> #</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_for_else_validation</span><span class="params">(fruits)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Test python for else</span></span><br><span class="line"><span class="string">    :param fruits: A string of fruits split with ','</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> fruits <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        fruits_result = <span class="string">"*"</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        fruits = fruits.split(<span class="string">","</span>)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"fruits &gt;&gt;&gt; &#123;&#125;"</span>.format(fruits)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> fruits:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"item &gt;&gt;&gt; &#123;&#125;"</span>.format(item)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            fruits_result = fruits</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"total &gt;&gt;&gt; &#123;&#125;"</span>.format(fruits_result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_while_else_validation</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Test python while else</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> index &lt;= <span class="number">10</span>:</span><br><span class="line">        index += <span class="number">1</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"index &#123;&#125;: &#123;&#125; "</span>.format(index, index)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"in while else"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"---------------------------"</span></span><br><span class="line">	<span class="keyword">print</span> <span class="string">"Run first test..."</span></span><br><span class="line">	test_1 = <span class="keyword">None</span></span><br><span class="line">	run_for_else_validation(test_1)</span><br><span class="line">	<span class="keyword">print</span> <span class="string">"Run first test finished"</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">print</span> <span class="string">"---------------------------"</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Run second test..."</span></span><br><span class="line">    test_2 = <span class="string">"apple"</span></span><br><span class="line">    run_for_else_validation(test_2)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Run second test finished"</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">print</span> <span class="string">"---------------------------"</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Run third test..."</span></span><br><span class="line">    test_3 = <span class="string">"apple,pear,orange"</span></span><br><span class="line">    run_for_else_validation(test_3)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Run third test finished"</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">print</span> <span class="string">"---------------------------"</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Run fourth test..."</span></span><br><span class="line">    run_while_else_validation()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Run fourth test finished"</span></span><br></pre></td></tr></table></figure>
<p>输出的结果是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">---------------------------</span><br><span class="line">Run first test...</span><br><span class="line">total &gt;&gt;&gt; *</span><br><span class="line">Run first test finished</span><br><span class="line">---------------------------</span><br><span class="line">Run second test...</span><br><span class="line">fruits &gt;&gt;&gt; [&apos;apple&apos;]</span><br><span class="line">item &gt;&gt;&gt; apple</span><br><span class="line">total &gt;&gt;&gt; [&apos;apple&apos;]</span><br><span class="line">Run second test finished</span><br><span class="line">---------------------------</span><br><span class="line">Run third test...</span><br><span class="line">fruits &gt;&gt;&gt; [&apos;apple&apos;, &apos;pear&apos;, &apos;orange&apos;]</span><br><span class="line">item &gt;&gt;&gt; apple</span><br><span class="line">item &gt;&gt;&gt; pear</span><br><span class="line">item &gt;&gt;&gt; orange</span><br><span class="line">total &gt;&gt;&gt; [&apos;apple&apos;, &apos;pear&apos;, &apos;orange&apos;]</span><br><span class="line">Run third test finished</span><br><span class="line">---------------------------</span><br><span class="line">Run fourth test...</span><br><span class="line">index 1: 1 </span><br><span class="line">index 2: 2 </span><br><span class="line">index 3: 3 </span><br><span class="line">index 4: 4 </span><br><span class="line">index 5: 5 </span><br><span class="line">index 6: 6 </span><br><span class="line">index 7: 7 </span><br><span class="line">index 8: 8 </span><br><span class="line">index 9: 9 </span><br><span class="line">index 10: 10 </span><br><span class="line">index 11: 11 </span><br><span class="line">in while else</span><br><span class="line">Run fourth test finished</span><br><span class="line">[Finished in 0.3s]</span><br></pre></td></tr></table></figure>
<p>完整代码地址：<a href="https://github.com/absentm/Demo/blob/master/Python-demo/test-demo/test_loop_with_else.py" target="_blank" rel="noopener">python-loop-with-else-demo</a></p>
<blockquote>
<p>庆幸每一次懵逼后的不知所措<br>庆幸每一次 fix 后的醍醐灌顶。</p>
</blockquote>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] <a href="https://docs.python.org/2/tutorial/controlflow.html#for-statements" target="_blank" rel="noopener">https://docs.python.org/2/tutorial/controlflow.html#for-statements</a><br>[2] <a href="http://book.pythontips.com/en/latest/for_-_else.html" target="_blank" rel="noopener">http://book.pythontips.com/en/latest/for_-_else.html</a><br>[3] <a href="http://python.jobbole.com/81063/" target="_blank" rel="noopener">http://python.jobbole.com/81063/</a></p>
<hr>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2018/02/10/Linux-磁盘相关命令整理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/10/Linux-磁盘相关命令整理/" itemprop="url">
                  Linux 磁盘相关命令整理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-02-10 10:12:48" itemprop="dateCreated datePublished" datetime="2018-02-10T10:12:48+08:00">2018-02-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-03-25 10:21:57" itemprop="dateModified" datetime="2018-03-25T10:21:57+08:00">2018-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux-Notes/" itemprop="url" rel="index"><span itemprop="name">Linux Notes</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/02/10/Linux-磁盘相关命令整理/" class="leancloud_visitors" data-flag-title="Linux 磁盘相关命令整理">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>近来，接触底层的内容多了一些，顺手撸一个 「 磁盘 」 相关主线的命令行备份，记录在这里留作备忘 …</p>
<h2 id="涉及命令"><a href="#涉及命令" class="headerlink" title="涉及命令"></a>涉及命令</h2><ul>
<li>lsblk: 罗列所有可用块设备的信息</li>
<li>blkid: 显示关于可用块设备的信息</li>
<li>sgdisk: </li>
<li>smartctl: </li>
<li>sas2ircu/sas3iru:</li>
</ul>
<h2 id="lsblk-命令"><a href="#lsblk-命令" class="headerlink" title="lsblk 命令"></a>lsblk 命令</h2><blockquote>
<p>lsblk（列出块设备）命令用于列出所有可用块设备的信息，但是，它不会列出RAM盘的信息。块设备有硬盘，闪存盘，CD-ROM等等。 <a href="https://linux.cn/article-3340-1.html" target="_blank" rel="noopener">引用自：参考资料 1</a></p>
</blockquote>
<p>lsblk 命令默认情况下将以 「 树状 」 列出所有块设备。在终端输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@AbsentM ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0 557.9G  0 disk </span><br><span class="line">├─sda1   8:1    0     1M  0 part </span><br><span class="line">├─sda2   8:2    0   500M  0 part /boot</span><br><span class="line">├─sda3   8:3    0 299.4G  0 part </span><br><span class="line">├─sda4   8:4    0     1K  0 part </span><br><span class="line">├─sda5   8:5    0  97.7G  0 part /</span><br><span class="line">├─sda6   8:6    0  97.7G  0 part /var/<span class="built_in">log</span></span><br><span class="line">├─sda7   8:7    0  62.5G  0 part [SWAP]</span><br><span class="line">└─sda8   8:8    0   196M  0 part /boot/efi</span><br><span class="line">sdb      8:16   0   200G  0 disk </span><br><span class="line">├─sdb1   8:17   0   150G  0 part /var/lib/cache</span><br><span class="line">└─sdb2   8:18   0    50G  0 part</span><br></pre></td></tr></table></figure>
<p>7 个列的名称解释如下：</p>
<ul>
<li>NAME : 块设备名称。</li>
<li>MAJ:MIN : 显示主要和次要设备号。</li>
<li>RM : 显示设备是否可移动设备。 RM 值为 1, 表示为可移动设备。</li>
<li>SIZE : 列出设备的容量大小信息。</li>
<li>RO : 表明设备是否为只读。 RO 值为 0, 表示只读。</li>
<li>TYPE : 显示块设备是否是磁盘或磁盘上的一个分区。 disk 表示磁盘，part 表示分区，rom 表示只读存储器。</li>
<li>MOUNTPOINT : 显示设备挂载的挂载点。</li>
</ul>
<p>为了更直观的定制列、格式化输出展示信息，可以使用如下参数格式化输出：</p>
<ul>
<li>-o : output columns，定制列</li>
<li>-b : print SIZE in bytes rather than in human readable format</li>
<li>-l : use list format output</li>
<li>-p : print complate device path</li>
<li>-P : use key=”value” output format</li>
</ul>
<p>可定制的列名称为：</p>
<ul>
<li>NAME : device name</li>
<li>MOUNTPOINT : where the device is mounted</li>
<li>UUID : filesystem UUID</li>
<li>PARTUUID : partition UUID</li>
<li>SIZE : size of the device</li>
<li>TYPE : device type</li>
<li>STATE : state of the device</li>
<li>ROTA : rotational device, 可旋转磁盘标志位，可用于区分 HDD 盘和 SSD 盘: 0 - 不可旋转，SSD; 1 - 可旋转，HDD</li>
</ul>
<p>如，以键值对的形式列出 /dev/sdb 盘的名称，大小，挂载点，类型，ROTA 位，分区 UUID，文件系统 UUID: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk /dev/sdb -b -p -P -o NAME,SIZE,MOUNTPOINT,TYPE,ROTA,UUID,PARTUUID</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@AbsentM ~]<span class="comment"># lsblk /dev/sdb -b -p -P -o NAME,SIZE,MOUNTPOINT,TYPE,ROTA,UUID,PARTUUID</span></span><br><span class="line">NAME=<span class="string">"/dev/sdb"</span> SIZE=<span class="string">"214748364800"</span> MOUNTPOINT=<span class="string">""</span> TYPE=<span class="string">"disk"</span> ROTA=<span class="string">"1"</span> UUID=<span class="string">""</span> PARTUUID=<span class="string">""</span></span><br><span class="line">NAME=<span class="string">"/dev/sdb1"</span> SIZE=<span class="string">"161061273600"</span> MOUNTPOINT=<span class="string">""</span> TYPE=<span class="string">"part"</span> ROTA=<span class="string">"1"</span> UUID=<span class="string">"0a3407de-014b-458b-b5c1-848e92a327a3"</span> PARTUUID=<span class="string">"b411dc99-f0a0-4c87-9e05-184977be8539"</span></span><br><span class="line">NAME=<span class="string">"/dev/sdb2"</span> SIZE=<span class="string">"53687091200"</span> MOUNTPOINT=<span class="string">""</span> TYPE=<span class="string">"part"</span> ROTA=<span class="string">"1"</span> UUID=<span class="string">""</span> PARTUUID=<span class="string">"f9fe0b69-a280-415d-a03a-a32752370dee"</span></span><br></pre></td></tr></table></figure>
<h3 id="Disk-UUID、PARTUUID-解释"><a href="#Disk-UUID、PARTUUID-解释" class="headerlink" title="Disk UUID、PARTUUID 解释"></a>Disk UUID、PARTUUID 解释</h3><p>关于磁盘 UUID、PARTUUID 等磁盘持久化命名解释可参看：<a href="https://wiki.archlinux.org/index.php/Persistent_block_device_naming_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87" target="_blank" rel="noopener">参考资料 2：Persistent block device naming (简体中文)</a>) 和 <a href="https://wiki.debian.org/Part-UUID" target="_blank" rel="noopener">参考资料 3：Part-UUID</a></p>
<h3 id="SSD、HDD-的-Linux-判断方法"><a href="#SSD、HDD-的-Linux-判断方法" class="headerlink" title="SSD、HDD 的 Linux 判断方法"></a>SSD、HDD 的 Linux 判断方法</h3><p>除 lsblk 命令的 ROTA 属性值可以作为 HDD 盘和 SSD 盘的判断方式( 1 - HDD, 0 - SSD) 外，还可以使用如下命令来判断：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat /sys/block/xxxx/queue/rotational</span><br></pre></td></tr></table></figure>
<p>如果返回值为：1，则表示为 HDD 盘；如果返回值为：0，则表示为 SSD 盘。其他方法可参看：<a href="https://blog.csdn.net/sch0120/article/details/77725658" target="_blank" rel="noopener">参考资料 4：Linux下判断磁盘是SSD还是HDD的几种方法</a></p>
<h3 id="将-HDD-盘模拟为-SSD-盘"><a href="#将-HDD-盘模拟为-SSD-盘" class="headerlink" title="将 HDD 盘模拟为 SSD 盘"></a>将 HDD 盘模拟为 SSD 盘</h3><p>可以通过如下命令，将 HDD 盘模拟为非旋转块设备（SSD）:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 0 &gt; /sys/block/xxxx/queue/rotational   <span class="comment"># 其中，xxxx 表示磁盘名称，如 sdb.</span></span><br></pre></td></tr></table></figure>
<h3 id="模拟插拔盘动作"><a href="#模拟插拔盘动作" class="headerlink" title="模拟插拔盘动作"></a>模拟插拔盘动作</h3><p>Linux 下可以使用如下命令模拟插拔盘动作，但应注意与实际物理插拔盘仍可能不太一样。</p>
<p>拔盘：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt; /sys/block/xxxx/device/delete   <span class="comment"># 其中，xxxx 表示磁盘名称，如 sdb.</span></span><br></pre></td></tr></table></figure>
<p>插盘：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">" - - - "</span> &gt; /sys/class/scsi_host/host0/scan    </span><br><span class="line"><span class="comment"># 其中，host0 中的数字 「 0 」 表示：使用 lsscsi 命令查看的 xxxx 盘第一列 [0:0:0:1] 中的第一个数字</span></span><br></pre></td></tr></table></figure>
<h2 id="blkid-命令"><a href="#blkid-命令" class="headerlink" title="blkid 命令"></a>blkid 命令</h2><p>blkid 命令可以显示关于可用块设备的信息，如：设备名称、UUID(文件系统唯一标示符)、Type（文件系统类型）、PARTLABEL、PARTUUID 等信息。</p>
<h3 id="列出所有可用块设备的信息"><a href="#列出所有可用块设备的信息" class="headerlink" title="列出所有可用块设备的信息"></a>列出所有可用块设备的信息</h3><p>在终端输入以下命令，列出所有可用块设备的信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blkid</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda2: UUID=<span class="string">"0733f5c1-cb85-4f98-9d4f-122cfcee9806"</span> TYPE=<span class="string">"ext4"</span></span><br><span class="line">/dev/sda3: UUID=<span class="string">"41a18221-6b1f-4ca2-9bc3-dc353c87d932"</span> TYPE=<span class="string">"ext4"</span></span><br><span class="line">/dev/sda4: UUID=<span class="string">"57183ff9-d4a5-4623-a47f-f8f17339be03"</span> TYPE=<span class="string">"swap"</span></span><br><span class="line">/dev/sdb1: UUID=<span class="string">"0a3407de-014b-458b-b5c1-848e92a327a3"</span> PARTUUID=<span class="string">"b411dc99-f0a0-4c87-9e05-184977be8539"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line">/dev/sdb2: UUID=<span class="string">"6bdf487f-cad7-4197-b0d9-4ddc6df1de2d"</span> PARTUUID=<span class="string">"f9fe0b69-a280-415d-a03a-a32752370dee"</span> TYPE=<span class="string">"xfs"</span></span><br></pre></td></tr></table></figure>
<h3 id="列出指定块设备的信息"><a href="#列出指定块设备的信息" class="headerlink" title="列出指定块设备的信息"></a>列出指定块设备的信息</h3><p>在终端输入以下命令，列出指定块设备的信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blkid /dev/sdb1</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/dev/sdb1: UUID=<span class="string">"0a3407de-014b-458b-b5c1-848e92a327a3"</span> PARTUUID=<span class="string">"b411dc99-f0a0-4c87-9e05-184977be8539"</span> TYPE=<span class="string">"xfs"</span></span><br></pre></td></tr></table></figure>
<h3 id="可用参数及格式化输出"><a href="#可用参数及格式化输出" class="headerlink" title="可用参数及格式化输出"></a>可用参数及格式化输出</h3><p>列出几个 blkid 命令支持的可用参数：</p>
<ul>
<li>-o : output format; can be one of: value, device, export or full; (default: full)</li>
<li>-s : show specified tag(s) (default show all tags)</li>
<li>-t : find device with a specified token (NAME=value pair)</li>
<li>-L : convert LABEL to device name</li>
<li>-U : convert UUID to device name</li>
</ul>
<p><strong>1/</strong> 使用 -o 参数格式化输出 sdb1 的块设备信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blkid -o value /dev/sdb1</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0a3407de-014b-458b-b5c1-848e92a327a3</span><br><span class="line">xfs</span><br><span class="line">b411dc99-f0a0-4c87-9e05-184977be8539</span><br></pre></td></tr></table></figure>
<p><strong>2/</strong> 使用 -o 参数格式化输出 sdb1 的块设备信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blkid -o <span class="built_in">export</span> /dev/sdb1</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DEVNAME=/dev/sdb1</span><br><span class="line">UUID=0a3407de-014b-458b-b5c1-848e92a327a3</span><br><span class="line">TYPE=xfs</span><br><span class="line">PARTUUID=b411dc99-f0a0-4c87-9e05-184977be8539</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="sgdisk-命令"><a href="#sgdisk-命令" class="headerlink" title="sgdisk 命令"></a>sgdisk 命令</h2><hr>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] <a href="https://linux.cn/article-3340-1.html" target="_blank" rel="noopener">https://linux.cn/article-3340-1.html</a><br>[2] <a href="https://wiki.archlinux.org/index.php/Persistent_block_device_naming_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Persistent_block_device_naming_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a><br>[3] <a href="https://wiki.debian.org/Part-UUID" target="_blank" rel="noopener">https://wiki.debian.org/Part-UUID</a><br>[4] <a href="https://blog.csdn.net/sch0120/article/details/77725658" target="_blank" rel="noopener">https://blog.csdn.net/sch0120/article/details/77725658</a></p>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2018/01/04/Windows10-Android-adb-环境变量配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/04/Windows10-Android-adb-环境变量配置/" itemprop="url">
                  Windows10 Android adb 环境变量配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-01-04 18:35:48" itemprop="dateCreated datePublished" datetime="2018-01-04T18:35:48+08:00">2018-01-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-01-05 13:47:22" itemprop="dateModified" datetime="2018-01-05T13:47:22+08:00">2018-01-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Android-Notes/" itemprop="url" rel="index"><span itemprop="name">Android Notes</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/01/04/Windows10-Android-adb-环境变量配置/" class="leancloud_visitors" data-flag-title="Windows10 Android adb 环境变量配置">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>2018 新开年，大家都在微信小游戏 『 跳一跳 』 中玩了个痛快。很快这个游戏被开发者玩坏了：<a href="https://github.com/burningcl/wechat_jump_hack" target="_blank" rel="noopener">腾讯微信跳一跳破解（目前最高19844分）</a>。</p>
<p>自己也尝试了一把，真机测试能够达到 『 495 分 』，不想再刷了，附上机器跳一跳第二把的视频：</p>
<p align="center"><video src="https://o8zyn0sct.qnssl.com/20180104_145010.mp4" width="38%" height="38%" controls="controls"><br>Your browser does not support the video tag.<br></video></p>

<blockquote>
<p>人类还是干不过机器</p>
</blockquote>
<p>言归正传，在破解的过程中需要 ADB 调试支持，这里顺手记录一下 Windows 10 环境下 ADB 的环境变量配置过程。</p>
<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>本文中的 ADB 使用 Android SDk 中自带的 adb.exe 工具。</p>
<h1 id="环境变量配置"><a href="#环境变量配置" class="headerlink" title="环境变量配置"></a>环境变量配置</h1><p>在 windows 系统中的配置过程还是挺简单的，需要先知道通常的环境变量配置都在什么位置。具体如下：</p>
<blockquote>
<p>控制面板 -&gt; 系统 -&gt; 高级系统设置 -&gt; 系统属性 -&gt; 高级 -&gt; 环境变量</p>
</blockquote>
<h2 id="新建系统变量"><a href="#新建系统变量" class="headerlink" title="新建系统变量"></a>新建系统变量</h2><p>在电脑中找到以下两个路径：</p>
<ol>
<li>E:\DevEnvironment\android-sdk-windows\platform-tools</li>
<li>E:\DevEnvironment\android-sdk-windows\tools</li>
</ol>
<p>如图所示：</p>
<p><img src="https://o8zyn0sct.qnssl.com/adb-platform-tools%20%E7%9B%AE%E5%BD%95.png" alt="ADB-platform-tools"></p>
<p><img src="https://o8zyn0sct.qnssl.com/adb-tools%20%E7%9B%AE%E5%BD%95.png" alt="ADB-tools"></p>
<p><strong>新建变量名:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANDROID_TOOL_HOME</span><br></pre></td></tr></table></figure>
<p><strong>变量值:</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E:\DevEnvironment\android-sdk-windows\platform-tools;E:\DevEnvironment\android-sdk-windows\tools</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong> 不同的目录间使用 『 ; 』 隔开。</p>
<p><img src="https://o8zyn0sct.qnssl.com/adb-ANDROID_TOOL_HOME%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" alt="ADB-ANDROID_TOOL_HOME"></p>
<h2 id="添加到-Path"><a href="#添加到-Path" class="headerlink" title="添加到 Path"></a>添加到 Path</h2><p>将新建的 『 ANDROID_TOOL_HOME 』 环境变量添加的系统变量的 『 Path 』 中：</p>
<blockquote>
<p>%ANDROID_TOOL_HOME%</p>
</blockquote>
<p><strong>注意：</strong> 使用 『 ; 』 将 Path 中不同环境变量值隔开。</p>
<p><img src="https://o8zyn0sct.qnssl.com/adb-Path%20%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" alt="ADB-添加到 Path"></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>Win + R 快捷键，输入 『 cmd 』，打开命令提示符后，输入 adb 测试配置是否成功。</p>
<p><img src="https://o8zyn0sct.qnssl.com/adb-%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95.png" alt="ADB-测试"></p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>[1]. <a href="https://jingyan.baidu.com/article/17bd8e52f514d985ab2bb800.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/17bd8e52f514d985ab2bb800.html</a><br>[2]. <a href="https://sspai.com/post/40471" target="_blank" rel="noopener">https://sspai.com/post/40471</a></p>
<h1 id="END"><a href="#END" class="headerlink" title="END"></a>END</h1><hr>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2017/11/25/mysql-5-7-19-winx64-zip-安装与配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/25/mysql-5-7-19-winx64-zip-安装与配置/" itemprop="url">
                  Mysql-5.7.19-winx64.zip 安装与配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-11-25 15:07:37" itemprop="dateCreated datePublished" datetime="2017-11-25T15:07:37+08:00">2017-11-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-01-09 19:55:51" itemprop="dateModified" datetime="2018-01-09T19:55:51+08:00">2018-01-09</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Tools/" itemprop="url" rel="index"><span itemprop="name">Tools</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/11/25/mysql-5-7-19-winx64-zip-安装与配置/" class="leancloud_visitors" data-flag-title="Mysql-5.7.19-winx64.zip 安装与配置">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本篇记录一下 Windows 环境下 Mysql .zip版的安装配置流程。推荐使用 Mysql 的童鞋都使用 .zip 免安装版的配置方法。（.exe 直接安装的话，如果安装失败经常出现卸载不干净，重装失败的情况）</p>
<blockquote>
<p>本文已授权 <a href="http://www.apecoding.com/" target="_blank" rel="noopener">猿代码</a> 同步发布。</p>
</blockquote>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>从 Mysql 官网直接下载：<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a> ，目前最新版是 5.7.19 。也可以适合自己的版本进行下载，其中 “Archive” 表示下载后直接解压即可，不需要安装，操作方便。</p>
<p><img src="http://media.apecoding.com/apc_59b7d9473277b.png" alt="Mysql 官网下载地址展示图"></p>
<p>具体的下载位置如图，（PS: 英文不好的童鞋要恶补啦）</p>
<p><img src="http://media.apecoding.com/apc_59b7d95ae16b3.png" alt="Mysql 官网下载地址位置"></p>
<p>下载完成后，找到一个不经常变更的目录解压缩该 mysql-5.7.19-winx64.zip 包，解压后的目录</p>
<p><img src="http://media.apecoding.com/apc_59b7d982282cc.png" alt="Mysql.zip 解压缩后"></p>
<h2 id="配置-my-ini-文件"><a href="#配置-my-ini-文件" class="headerlink" title="配置 my.ini 文件"></a>配置 my.ini 文件</h2><p>my.ini 是 Mysql 默认的配置文件，但是在最新版中居然没有该文件。那就新建吧，在 Mysql 的根目录中新建 my.ini 文件，并在其中添加如下代码，作为 Mysql 的初始配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[mysql]</span><br><span class="line"># 设置 mysql 客户端默认字符集</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">#设置 3306 端口</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line"># 设置 mysql 的安装目录（注意，修改为自己的解压缩目录）</span><br><span class="line">basedir=E:\DevEnvironment\mysql-5.7.19-winx64</span><br><span class="line"></span><br><span class="line"># 设置 mysql 数据库的数据的存放目录（注意，修改为自己的解压缩目录）</span><br><span class="line">datadir=E:\DevEnvironment\mysql-5.7.19-winx64\data</span><br><span class="line"></span><br><span class="line"># 允许最大连接数</span><br><span class="line">max_connections=200</span><br><span class="line"></span><br><span class="line"># 服务端使用的字符集默认为 8 比特编码的 latin1 字符集</span><br><span class="line">character-set-server=utf8</span><br><span class="line"></span><br><span class="line"># 创建新表时将使用的默认存储引擎</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"></span><br><span class="line"># 免密码登陆</span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure>
<h2 id="配置-Mysql-环境变量"><a href="#配置-Mysql-环境变量" class="headerlink" title="配置 Mysql 环境变量"></a>配置 Mysql 环境变量</h2><p>在我的电脑 -&gt; 右键 -&gt; 属性 -&gt; 高级系统设置 -&gt; 系统属性 -&gt; 高级 -&gt; 环境变量 -&gt; 系统变量中新建如下环境变量（如图所示）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">变量名：MYSQL_HOME</span><br><span class="line">变量值：E:\DevEnvironment\mysql-5.7.19-winx64 （自己 Mysql 解压缩的位置）</span><br></pre></td></tr></table></figure>
<p><img src="http://media.apecoding.com/apc_59b7d9bb7eaac.png" alt="MYSQL_HOME"></p>
<p>之后在系统变量 -&gt; Path 行中添加 Mysql 的 bin 目录，添加如下环境变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%MYSQL_HOME%\bin</span><br></pre></td></tr></table></figure>
<p>注意：Windows10 系统直接新建就行了，Windows7 中需要添加 “;” 号：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;%MYSQL_HOME%\bin</span><br></pre></td></tr></table></figure>
<h2 id="安装运行测试"><a href="#安装运行测试" class="headerlink" title="安装运行测试"></a>安装运行测试</h2><p>以<strong>管理员身份</strong>运行 cmd，并键入如下命令安装和初始化 Mysql：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize</span><br><span class="line">mysqld install</span><br><span class="line">net start mysql</span><br><span class="line">mysql -u -root</span><br></pre></td></tr></table></figure>
<p>之后便可以进入 Mysql 控制台界面了，如下图所示：</p>
<p><img src="http://media.apecoding.com/apc_59b7d9f14db0c.png" alt="从控制台进入 Mysql "></p>
<h2 id="安装-Navcat-可视化工具"><a href="#安装-Navcat-可视化工具" class="headerlink" title="安装 Navcat 可视化工具"></a>安装 Navcat 可视化工具</h2><p>下载破解版的 Navcat 软件。下载链接：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">链接: http://pan.baidu.com/s/1dEG9S45 密码: 888y</span><br></pre></td></tr></table></figure>
<p>下载完成后，找到 Navcat 的安装目录，将破解文件 PatchNavicat.exe 复制到到与 navcat.exe 同级目录中，点击。（<strong>注意：</strong> 破解前一定要先关闭 navcat 软件）</p>
<p><img src="http://media.apecoding.com/apc_59b7da10a6b79.png" alt="Navcat 破解"></p>
<p><strong>安装成功打开软件如下图所示：</strong></p>
<p><img src="http://media.apecoding.com/apc_59b7da443173d.png" alt="Navcat 界面"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1]. <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a><br>[2]. <a href="http://www.navicat.com.cn/products/navicat-for-mysql/" target="_blank" rel="noopener">http://www.navicat.com.cn/products/navicat-for-mysql/</a></p>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><hr>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2017/11/21/Eclipse-优化配置项说明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/21/Eclipse-优化配置项说明/" itemprop="url">
                  Eclipse 优化配置项说明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-11-21 20:13:58" itemprop="dateCreated datePublished" datetime="2017-11-21T20:13:58+08:00">2017-11-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2017-12-26 15:05:07" itemprop="dateModified" datetime="2017-12-26T15:05:07+08:00">2017-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Tools/" itemprop="url" rel="index"><span itemprop="name">Tools</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/11/21/Eclipse-优化配置项说明/" class="leancloud_visitors" data-flag-title="Eclipse 优化配置项说明">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>好久不更博了，上一次在 github 上提交代码和更新文章还是在学校的时候，那时候真好。</p>
</blockquote>
<p>这篇文章中记录一下 Eclipse 的优化配置吧，每一次都上网找不同的链接搜索也挺麻烦的；索性，再做一次搬砖的，整理到这里，留待日后使用。</p>
<h2 id="Preferences-配置修改"><a href="#Preferences-配置修改" class="headerlink" title="Preferences 配置修改"></a>Preferences 配置修改</h2><ol>
<li>General &gt; Startup and Shutdown : 移除所有在启动时加载的插件。</li>
<li>General &gt; Editors &gt; Text Editors &gt; Spelling : 关闭拼写检查。</li>
<li>General &gt; Validation &gt; 勾选“Suspend all validator”。</li>
<li>Window &gt; Customize Perspective &gt; 移除所有用不到或不想用的内容（尽量使用快捷键），菜单栏也是如此（你用过几次菜单栏的打印按钮？）。</li>
<li>Install/Update &gt; Automatic Updates &gt; 取消勾选“Automatically find new updates and notify me”。</li>
<li>General &gt; Appearance &gt; 取消勾选“Enable Animations”。</li>
<li>使用默认的主题。其他主题可能会降低运行速度。</li>
<li>取消 Build Auto。</li>
</ol>
<h2 id="修改-eclipse-ini-文件"><a href="#修改-eclipse-ini-文件" class="headerlink" title="修改 eclipse.ini 文件"></a>修改 eclipse.ini 文件</h2><p>eclipse.ini 文件是 Eclipse IDE 的配置文件，也可以通过修改其配置文件提升 Eclipse 的速度。</p>
<h3 id="文件位置"><a href="#文件位置" class="headerlink" title="文件位置"></a>文件位置</h3><ul>
<li><p>Windows/Linux：位于$ECLIPSE_HOME（注：$ECLIPSE HOME是Eclipse的路径，这里假设Linux下也是自行安装，而不是通过源安装）</p>
</li>
<li><p>MacOS：位于$ECLIPSE_HOME/Eclipse.app/Contents/MacOS</p>
</li>
</ul>
<h3 id="添加如下内容"><a href="#添加如下内容" class="headerlink" title="添加如下内容"></a>添加如下内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 打开编译器性能优化</span><br><span class="line">-XX:+AggressiveOpts</span><br><span class="line"></span><br><span class="line"># 增加永生代空间（分配新对象的地方）（注：在 JDK 8 中，取消了永生代）</span><br><span class="line">-XX:PermSize=512m</span><br><span class="line">-XX:MaxPermSize=512m</span><br><span class="line"></span><br><span class="line"># 增加最小最大堆的空间（含有新生代和年老代）</span><br><span class="line">-Xms2048m</span><br><span class="line">-Xmx2048m</span><br><span class="line"></span><br><span class="line"># 为新生代增加堆的大小</span><br><span class="line">-Xmn512m</span><br><span class="line"></span><br><span class="line"># 为每个线程设置栈大小</span><br><span class="line">-Xss2m</span><br><span class="line"></span><br><span class="line"># 调整垃圾收集</span><br><span class="line">-XX:+UseParallelOldGC</span><br></pre></td></tr></table></figure>
<h2 id="Maven-配置"><a href="#Maven-配置" class="headerlink" title="Maven 配置"></a>Maven 配置</h2><p>使用 Eclipse 创建 Maven 项目时，下载依赖速度会比较慢。可以考虑下载依赖使用国内阿里云的镜像。具体操作如下：</p>
<h3 id="创建-settings-xml-文件"><a href="#创建-settings-xml-文件" class="headerlink" title="创建 settings.xml 文件"></a>创建 settings.xml 文件</h3><p>在 Maven 配置目录或者默认目录中 (C:\Users\xxxxx.m2\repository) 创建 settings.xml 文件，并修改一下两个位置：</p>
<p><strong>1/</strong> 指定本地仓库位置</p>
<p>在 settings.xml 文件中指定本地仓库位置，添加如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;localRepository&gt;C:\Users\xxxxx\.m2\repository&lt;/localRepository&gt;</span><br></pre></td></tr></table></figure>
<p><strong>2/</strong> 指定阿里云镜像</p>
<p>在 settings.xml 文件中添加如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;mirrors&gt;</span><br><span class="line">	&lt;mirror&gt;</span><br><span class="line">		&lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">		&lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">		&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span><br><span class="line">		&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">	&lt;/mirror&gt;</span><br><span class="line">&lt;/mirrors&gt;</span><br></pre></td></tr></table></figure>
<h3 id="完整-settings-xml"><a href="#完整-settings-xml" class="headerlink" title="完整 settings.xml"></a>完整 settings.xml</h3><p>完整 settings.xml 如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line"> | This is the configuration file for Maven. It can be specified at two levels:</span><br><span class="line"> |</span><br><span class="line"> |  1. User Level. This settings.xml file provides configuration for a single user,</span><br><span class="line"> |                 and is normally provided in $&#123;user.home&#125;/.m2/settings.xml.</span><br><span class="line"> |</span><br><span class="line"> |                 NOTE: This location can be overridden with the CLI option:</span><br><span class="line"> |</span><br><span class="line"> |                 -s /path/to/user/settings.xml</span><br><span class="line"> |</span><br><span class="line"> |  2. Global Level. This settings.xml file provides configuration for all Maven</span><br><span class="line"> |                 users on a machine (assuming they&apos;re all using the same Maven</span><br><span class="line"> |                 installation). It&apos;s normally provided in</span><br><span class="line"> |                 $&#123;maven.home&#125;/conf/settings.xml.</span><br><span class="line"> |</span><br><span class="line"> |                 NOTE: This location can be overridden with the CLI option:</span><br><span class="line"> |</span><br><span class="line"> |                 -gs /path/to/global/settings.xml</span><br><span class="line"> | |</span><br><span class="line"> |--&gt;</span><br><span class="line">&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span><br><span class="line">          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">          xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;</span><br><span class="line">          </span><br><span class="line">  &lt;!--  Change in below line  --&gt;</span><br><span class="line">  &lt;localRepository&gt;C:\Users\xxxxxxxxx\.m2\repository&lt;/localRepository&gt;</span><br><span class="line">  &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</span><br><span class="line">  &lt;offline&gt;false&lt;/offline&gt;</span><br><span class="line">  &lt;pluginGroups&gt;</span><br><span class="line">    &lt;!-- pluginGroup</span><br><span class="line">     | Specifies a further group identifier to use for plugin lookup.</span><br><span class="line">    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/pluginGroups&gt;</span><br><span class="line">  &lt;proxies&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    &lt;proxy&gt;</span><br><span class="line">      &lt;id&gt;optional&lt;/id&gt;</span><br><span class="line">      &lt;active&gt;true&lt;/active&gt;</span><br><span class="line">      &lt;protocol&gt;http&lt;/protocol&gt;</span><br><span class="line">      &lt;username&gt;proxyuser&lt;/username&gt;</span><br><span class="line">      &lt;password&gt;proxypass&lt;/password&gt;</span><br><span class="line">      &lt;host&gt;proxy.host.net&lt;/host&gt;</span><br><span class="line">      &lt;port&gt;80&lt;/port&gt;</span><br><span class="line">      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;</span><br><span class="line">    &lt;/proxy&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/proxies&gt;</span><br><span class="line">  &lt;servers&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    &lt;server&gt;</span><br><span class="line">      &lt;id&gt;deploymentRepo&lt;/id&gt;</span><br><span class="line">      &lt;username&gt;crunchify&lt;/username&gt;</span><br><span class="line">      &lt;password&gt;crunchify&lt;/password&gt;</span><br><span class="line">    &lt;/server&gt;</span><br><span class="line"> 	--&gt;</span><br><span class="line">  &lt;/servers&gt;</span><br><span class="line">  &lt;mirrors&gt;</span><br><span class="line">    &lt;mirror&gt;</span><br><span class="line">        &lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">        &lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">    	&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span><br><span class="line">	    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">     &lt;/mirror&gt;</span><br><span class="line">  &lt;/mirrors&gt;</span><br><span class="line">  &lt;profiles&gt;</span><br><span class="line">  &lt;/profiles&gt;</span><br><span class="line">&lt;/settings&gt;</span><br></pre></td></tr></table></figure>
<h3 id="设置-Eclipse-Maven-Plugin"><a href="#设置-Eclipse-Maven-Plugin" class="headerlink" title="设置 Eclipse Maven Plugin"></a>设置 Eclipse Maven Plugin</h3><p>在 Eclipse 中设置加载 settings.xml 配置文件：</p>
<blockquote>
<p>Window -&gt; Preferences -&gt; Maven -&gt; User Settings -&gt; User settings Browse 选择上面创建的 setting.xml -&gt; ok</p>
</blockquote>
<h2 id="Eclipse-Tomcat-不输入项目名称直接访问项目配置"><a href="#Eclipse-Tomcat-不输入项目名称直接访问项目配置" class="headerlink" title="Eclipse-Tomcat 不输入项目名称直接访问项目配置"></a>Eclipse-Tomcat 不输入项目名称直接访问项目配置</h2><p>使用 Eclipse 和 Tomcat 开发的 Javaweb 项目发布后浏览器的访问路径中默认会加上项目名称，如果想去掉项目名称，可以做如下配置：</p>
<blockquote>
<p>eclipse -&gt; 右键项目名称 -&gt; 选择 Properties -&gt; Web Project Settings -&gt; Context root 选项 -&gt; 将 Context root 的值改为 / -&gt; ok</p>
</blockquote>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1]. <a href="http://www.importnew.com/13942.html" target="_blank" rel="noopener">http://www.importnew.com/13942.html</a><br>[2]. <a href="http://rongmayisheng.com/post/eclipse%E5%85%A8%E9%9D%A2%E6%8F%90%E9%80%9F" target="_blank" rel="noopener">http://rongmayisheng.com/post/eclipse%E5%85%A8%E9%9D%A2%E6%8F%90%E9%80%9F</a><br>[3]. <a href="https://zyf.im/2016/09/14/eclipse-maven-settings-mirror-in-china/" target="_blank" rel="noopener">https://zyf.im/2016/09/14/eclipse-maven-settings-mirror-in-china/</a></p>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><hr>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2017/03/18/Python-matplotlib-数据可视化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/18/Python-matplotlib-数据可视化/" itemprop="url">
                  Python matplotlib 数据可视化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-03-18 15:59:30" itemprop="dateCreated datePublished" datetime="2017-03-18T15:59:30+08:00">2017-03-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2017-11-21 19:44:44" itemprop="dateModified" datetime="2017-11-21T19:44:44+08:00">2017-11-21</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python-Notes/" itemprop="url" rel="index"><span itemprop="name">Python Notes</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/03/18/Python-matplotlib-数据可视化/" class="leancloud_visitors" data-flag-title="Python matplotlib 数据可视化">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>这篇记载一下 Python 环境下使用 matplotlib 绘制各种曲线图的用法，阅读这篇文章你将会获得如下内容：</p>
<ul>
<li>matplotlib 及环境配置。</li>
<li>一幅数据绘图的结构都是如何组成的，与 matplotlib 相关的名称是如何对应的？</li>
<li>常见的数据绘图都包含哪些，以及是如何绘制的？</li>
</ul>
<p>你可能需要的先前技能如下：</p>
<ul>
<li>Python 开发环境及 matplotlib 工具包</li>
<li>Python 基础语法</li>
<li>Python numpy 包使用</li>
</ul>
<hr>
<h2 id="matplotlib-安装配置"><a href="#matplotlib-安装配置" class="headerlink" title="matplotlib 安装配置"></a>matplotlib 安装配置</h2><p>使用 Python 进行数据绘图前，Python 环境的安装配置是必须，请参看这篇文章：<br><a href="https://absentm.github.io/2015/12/02/python%E5%AE%89%E8%A3%85%E7%AE%80%E8%AE%B0/">Python 环境安装配置</a>。</p>
<p>在各种环境中 (Windows、Linux、Mac) 的 matplotlib 环境安装配置如下： (以 Ubuntu 为例)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 推荐使用这种方式安装</span></span><br><span class="line"><span class="comment"># 安装 numpy、scipy包</span></span><br><span class="line">sudo apt-get install python-numpy</span><br><span class="line">sudo apt-get install python-scipy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 matplotlib 包</span></span><br><span class="line">sudo apt-get install python-matplotlib</span><br></pre></td></tr></table></figure>
<p>当然也可以使用 pip 安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install numpy</span><br><span class="line">sudo pip install scipy</span><br><span class="line">sudo pip install matplotlib</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="图的基本结构"><a href="#图的基本结构" class="headerlink" title="图的基本结构"></a>图的基本结构</h2><p>通常，使用 numpy 组织数据, 使用 matplotlib API 进行数据图像绘制。 一幅数据图基本上包括如下结构：</p>
<ol>
<li>Data: 数据区，包括数据点、描绘形状</li>
<li>Axis: 坐标轴，包括 X 轴、 Y 轴及其标签、刻度尺及其标签</li>
<li>Title: 标题，数据图的描述</li>
<li>Legend: 图例，区分图中包含的多种曲线或不同分类的数据</li>
<li>其他的还有图形文本 (Text)、注解 (Annotate)等其他描述</li>
</ol>
<p>详细的结构图如下图所示：</p>
<p><img src="https://o8zyn0sct.qnssl.com/Python_Figure_Structure.png" alt="数据绘图基本结构"></p>
<p>This figure powered by <a href="https://www.snipaste.com/" target="_blank" rel="noopener">Snipaste</a> .</p>
<hr>
<h2 id="绘图分类"><a href="#绘图分类" class="headerlink" title="绘图分类"></a>绘图分类</h2><p>Matplotlib API 中提供了常见的绘图类型，常用的包括如下：</p>
<ul>
<li>常规图：regular plot</li>
<li>直方图：bar plot</li>
<li>散点图：scatter plot</li>
<li>饼状图：pie plot</li>
<li>轮廓图：contour plot</li>
<li>3D图：3D plot</li>
<li>多子图：subplot</li>
<li>显示图片：imshow</li>
</ul>
<p>参考文献 [3] 详细记录了 API 中的各种类型图的参数说明，不再一一赘述。</p>
<hr>
<h2 id="画法"><a href="#画法" class="headerlink" title="画法"></a>画法</h2><p>本篇以常规图为例，详细记录作图流程及技巧。按照绘图结构，可将数据图的绘制分为如下几个步骤：</p>
<ul>
<li>导入 matplotlib 包相关工具包</li>
<li>准备数据，numpy 数组存储</li>
<li>绘制原始曲线</li>
<li>配置标题、坐标轴、刻度、图例</li>
<li>添加文字说明、注解</li>
<li>显示、保存绘图结果</li>
</ul>
<p>先给出一个完整的图结构吧，这个图主要是绘制 cos、sin、sqrt 函数图像，如下：</p>
<p><img src="https://o8zyn0sct.qnssl.com/figure.png" alt="完整的常规图绘制结果"></p>
<h3 id="导包"><a href="#导包" class="headerlink" title="导包"></a>导包</h3><p>涉及到 matplotlib.pyplot、pylab 和 numpy，如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> pylab <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure>
<h3 id="准备数据"><a href="#准备数据" class="headerlink" title="准备数据"></a>准备数据</h3><p>numpy 常用来组织源数据:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义数据部分</span></span><br><span class="line">x = np.arange(<span class="number">0.</span>, <span class="number">10</span>, <span class="number">0.2</span>)</span><br><span class="line">y1 = np.cos(x)</span><br><span class="line">y2 = np.sin(x)</span><br><span class="line">y3 = np.sqrt(x)</span><br></pre></td></tr></table></figure>
<h3 id="绘制基本曲线"><a href="#绘制基本曲线" class="headerlink" title="绘制基本曲线"></a>绘制基本曲线</h3><p>使用 plot 函数直接绘制上述函数曲线，可以通过配置 plot 函数参数调整曲线的样式、粗细、颜色、标记等：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘制 3 条函数曲线</span></span><br><span class="line">plt.plot(x, y1, color=<span class="string">'blue'</span>, linewidth=<span class="number">1.5</span>, linestyle=<span class="string">'-'</span>, marker=<span class="string">'.'</span>, label=<span class="string">r'$y = cos&#123;x&#125;$'</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y2, color=<span class="string">'green'</span>, linewidth=<span class="number">1.5</span>, linestyle=<span class="string">'-'</span>, marker=<span class="string">'*'</span>, label=<span class="string">r'$y = sin&#123;x&#125;$'</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y3, color=<span class="string">'m'</span>, linewidth=<span class="number">1.5</span>, linestyle=<span class="string">'-'</span>, marker=<span class="string">'x'</span>, label=<span class="string">r'$y = \sqrt&#123;x&#125;$'</span>)</span><br></pre></td></tr></table></figure>
<p><strong>1&gt; color 参数</strong></p>
<p>包含基本的红(red, r)、绿(green, g)、蓝(blue, b)、黑(k)、青色(c)、洋红色(m)、黄色(y)、白色(w)及其衍生色，还可以使用 6 个 16 进制数表示（如，’#FF00CC’, ‘#ff00ff’）。</p>
<p><img src="https://o8zyn0sct.qnssl.com/colormaps.png" alt="color 样式图"></p>
<p>color 参数图片由参考文献 [1] 提供。</p>
<p><strong>2&gt; linestyle 参数</strong></p>
<p>其中，linestyle 参数主要包含虚线、点化虚线、粗虚线、实线，表示符号见下图：</p>
<p><img src="https://o8zyn0sct.qnssl.com/line_style.png" alt=""></p>
<p>linestyle 参数图片由参考文献 [1] 提供。</p>
<p><strong>3&gt; marker 参数</strong></p>
<p>在曲线上标记特殊的符号，以区分不同的线段，比较实用。常见的形状及表示符号如下图所示：</p>
<p><img src="https://o8zyn0sct.qnssl.com/marks.png" alt="marker 样式图"></p>
<p>marker 参数图片由参考文献 [1] 提供。</p>
<h3 id="设置坐标轴"><a href="#设置坐标轴" class="headerlink" title="设置坐标轴"></a>设置坐标轴</h3><p>可通过如下代码，移动坐标轴 <strong>spines</strong>，解说详见注释：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 坐标轴上移</span></span><br><span class="line">ax = plt.subplot(<span class="number">111</span>)</span><br><span class="line">ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)     <span class="comment"># 去掉右边的边框线</span></span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)       <span class="comment"># 去掉上边的边框线</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动下边边框线，相当于移动 X 轴</span></span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)    </span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动左边边框线，相当于移动 y 轴</span></span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">'left'</span>)</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br></pre></td></tr></table></figure>
<p>可通过如下代码，设置刻度尺间隔 <strong>lim</strong>、刻度标签 <strong>ticks</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置 x, y 轴的刻度取值范围</span></span><br><span class="line">plt.xlim(x.min()*<span class="number">1.1</span>, x.max()*<span class="number">1.1</span>)</span><br><span class="line">plt.ylim(<span class="number">-1.5</span>, <span class="number">4.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 x, y 轴的刻度标签值</span></span><br><span class="line">plt.xticks([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>], [<span class="string">r'2'</span>, <span class="string">r'4'</span>, <span class="string">r'6'</span>, <span class="string">r'8'</span>, <span class="string">r'10'</span>])</span><br><span class="line">plt.yticks([<span class="number">-1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>],</span><br><span class="line">    [<span class="string">r'-1.0'</span>, <span class="string">r'0.0'</span>, <span class="string">r'1.0'</span>, <span class="string">r'2.0'</span>, <span class="string">r'3.0'</span>, <span class="string">r'4.0'</span>])</span><br></pre></td></tr></table></figure>
<p>可通过如下代码，设置 X、Y 坐标轴和标题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置标题、x轴、y轴</span></span><br><span class="line">plt.title(<span class="string">r'$the \ function \ figure \ of \ cos(), \ sin() \ and \ sqrt()$'</span>, fontsize=<span class="number">19</span>)</span><br><span class="line">plt.xlabel(<span class="string">r'$the \ input \ value \ of \ x$'</span>, fontsize=<span class="number">18</span>, labelpad=<span class="number">88.8</span>)</span><br><span class="line">plt.ylabel(<span class="string">r'$y = f(x)$'</span>, fontsize=<span class="number">18</span>, labelpad=<span class="number">12.5</span>)</span><br></pre></td></tr></table></figure>
<h3 id="设置文字描述、注解"><a href="#设置文字描述、注解" class="headerlink" title="设置文字描述、注解"></a>设置文字描述、注解</h3><p>可通过如下代码，在数据图中添加文字描述 <strong>text</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.text(<span class="number">4</span>, <span class="number">1.68</span>, <span class="string">r'$x \in [0.0, \ 10.0]$'</span>, color=<span class="string">'k'</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.text(<span class="number">4</span>, <span class="number">1.38</span>, <span class="string">r'$y \in [-1.0, \ 4.0]$'</span>, color=<span class="string">'k'</span>, fontsize=<span class="number">15</span>)</span><br></pre></td></tr></table></figure>
<p>// 其中，r’$…$’ 语句表示使用 <strong>LaTex</strong> 公式符号，LaTex 公式符号见参考文献 [5].</p>
<p>可通过如下代码，在数据图中给特殊点添加注解 <strong>annotate</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 特殊点添加注解</span></span><br><span class="line">plt.scatter([<span class="number">8</span>,],[np.sqrt(<span class="number">8</span>),], <span class="number">50</span>, color =<span class="string">'m'</span>)  <span class="comment"># 使用散点图放大当前点</span></span><br><span class="line"></span><br><span class="line">plt.annotate(<span class="string">r'$2\sqrt&#123;2&#125;$'</span>, xy=(<span class="number">8</span>, np.sqrt(<span class="number">8</span>)), xytext=(<span class="number">8.5</span>, <span class="number">2.2</span>), fontsize=<span class="number">16</span>, color=<span class="string">'#090909'</span>, arrowprops=dict(arrowstyle=<span class="string">'-&gt;'</span>, connectionstyle=<span class="string">'arc3, rad=0.1'</span>, color=<span class="string">'#090909'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="设置图例"><a href="#设置图例" class="headerlink" title="设置图例"></a>设置图例</h3><p>可使用如下两种方式，给绘图设置图例：<br>1: 在 <strong>plt.plot</strong> 函数中添加 <strong>label</strong> 参数后，使用 plt.legend(loc=’up right’)<br>2: 不使用参数 label, 直接使用如下命令：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.legend([<span class="string">'cos(x)'</span>, <span class="string">'sin(x)'</span>, <span class="string">'sqrt(x)'</span>], loc=<span class="string">'up right'</span>)</span><br></pre></td></tr></table></figure>
<p><strong>loc</strong> 参数表示图例的位置，常见的位置参数如下：</p>
<p><img src="https://o8zyn0sct.qnssl.com/legend.png" alt="legend loc 参数"></p>
<p>legend loc 参数图片由参考文献 [2] 提供。</p>
<h3 id="网格线开关"><a href="#网格线开关" class="headerlink" title="网格线开关"></a>网格线开关</h3><p>可使用如下代码，给绘图设置网格线：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示网格线</span></span><br><span class="line">plt.grid(<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<h3 id="显示、保存"><a href="#显示、保存" class="headerlink" title="显示、保存"></a>显示、保存</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.show()    <span class="comment"># 显示</span></span><br><span class="line"><span class="comment"># savefig('../figures/plot3d_ex.png',dpi=48)    # 保存，前提目录存在</span></span><br></pre></td></tr></table></figure>
<p>本例完整代码已上传 github:</p>
<p><a href="https://github.com/absentm/Demo/blob/master/pythonCode/plot.py" target="_blank" rel="noopener">plot.py</a></p>
<h3 id="显示中文"><a href="#显示中文" class="headerlink" title="显示中文"></a>显示中文</h3><p>默认的编程环境无法显示中文字符，这里提供一种方法，添加如下配置代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>]=[<span class="string">'SimHei'</span>]    <span class="comment"># 用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>]=<span class="keyword">False</span>      <span class="comment"># 用来正常显示负号</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="其他图画法"><a href="#其他图画法" class="headerlink" title="其他图画法"></a>其他图画法</h2><p>按照类型图的分类，下文简要记录一下直方图的基础代码，其他，如散点图、饼状图、轮廓图、3D图、多子图等从参考文献 [1] 获取。</p>
<h3 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h3><p>直方图，也即柱状图，使用 bar API 进行绘制</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> pylab <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">x_size = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>]</span><br><span class="line">y_time_point = [<span class="number">0</span>, <span class="number">200</span>, <span class="number">415</span>, <span class="number">628</span>, <span class="number">714</span>, <span class="number">862</span>, <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">x_zhe = [<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]</span><br><span class="line">y_zhe = [<span class="number">200</span>, <span class="number">415</span>, <span class="number">628</span>, <span class="number">714</span>, <span class="number">862</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置刻度标签</span></span><br><span class="line">plt.xticks(x_zhe, (<span class="string">u"3"</span>, <span class="string">u"5"</span>, <span class="string">u"7"</span>, <span class="string">u"9"</span>, <span class="string">u"11"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制柱状图</span></span><br><span class="line">plt.bar(left = (x_size), height = (y_time_point), width = <span class="number">1.0</span>,</span><br><span class="line">	align=<span class="string">"center"</span>, facecolor = <span class="string">'lightskyblue'</span>,edgecolor = <span class="string">'white'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加文本解释</span></span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> zip(x_zhe, y_zhe):</span><br><span class="line">    plt.text(x, y+<span class="number">10</span>, <span class="string">'%.0f'</span> % y, ha=<span class="string">'center'</span>, va= <span class="string">'bottom'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置y轴范围</span></span><br><span class="line">ylim(<span class="number">0</span>, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画折线图</span></span><br><span class="line">plt.plot(x_zhe, y_zhe, <span class="string">'y.-'</span>)</span><br><span class="line">plt.title(<span class="string">'Time values change with Size'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Size'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Time (s)'</span>)</span><br><span class="line">plt.grid(<span class="keyword">True</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>以上代码可以得到如下直方图：</p>
<p><img src="https://o8zyn0sct.qnssl.com/bar.png" alt="直方图"></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1] <a href="http://www.labri.fr/perso/nrougier/teaching/matplotlib/#beyond-this-tutorial" target="_blank" rel="noopener">http://www.labri.fr/perso/nrougier/teaching/matplotlib/#beyond-this-tutorial</a><br>[2] <a href="http://www.bioinfo.org.cn/~casp/temp/spring.lecture/Matplotlib_slides.pdf" target="_blank" rel="noopener">http://www.bioinfo.org.cn/~casp/temp/spring.lecture/Matplotlib_slides.pdf</a><br>[3] <a href="http://matplotlib.org/api/pyplot_api.html" target="_blank" rel="noopener">http://matplotlib.org/api/pyplot_api.html</a><br>[4] <a href="http://python.jobbole.com/85106/" target="_blank" rel="noopener">http://python.jobbole.com/85106/</a><br>[5] <a href="http://mohu.org/info/symbols/symbols.htm" target="_blank" rel="noopener">http://mohu.org/info/symbols/symbols.htm</a></p>
<hr>
<h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><blockquote>
<p>转载请注明作者和出处，禁止一切商业用途！</p>
</blockquote>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><hr>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2017/01/16/常用的-Shell-命令整理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/16/常用的-Shell-命令整理/" itemprop="url">
                  常用的 Shell 命令整理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-01-16 17:12:48" itemprop="dateCreated datePublished" datetime="2017-01-16T17:12:48+08:00">2017-01-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-03-19 09:54:25" itemprop="dateModified" datetime="2018-03-19T09:54:25+08:00">2018-03-19</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux-Notes/" itemprop="url" rel="index"><span itemprop="name">Linux Notes</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/01/16/常用的-Shell-命令整理/" class="leancloud_visitors" data-flag-title="常用的 Shell 命令整理">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="想法"><a href="#想法" class="headerlink" title="想法"></a>想法</h2><p>这篇主要记录一下在 Linux 终端下常用的 Shell 命令， 像 ls， cd, cp, mv 等基本的就不做整理介绍了，之后遇到了会一点点追加，算是一个整理吧。<strong>整理的命令都在 Ubuntu 14.04 LTS 系统亲测通过 ……</strong></p>
<h2 id="wc-命令"><a href="#wc-命令" class="headerlink" title="wc 命令"></a>wc 命令</h2><p>wc 命令是一个统计命令，使用方式可以使用 「 man wc 」 查看。</p>
<h3 id="统计文件个数"><a href="#统计文件个数" class="headerlink" title="统计文件个数"></a>统计文件个数</h3><p>1: 统计某文件夹下文件的个数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注： 参数 '-l'， 是小写的英文字母 l, 不是数字 1</span></span><br><span class="line">ls -l | grep <span class="string">"^-"</span> | wc -l</span><br></pre></td></tr></table></figure>
<p>2: 统计某文件夹下目录的个数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l | grep <span class="string">"^ｄ"</span> | wc -l</span><br></pre></td></tr></table></figure>
<p>3: 统计文件夹下文件的个数，包括子文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lR | grep <span class="string">"^-"</span> | wc -l</span><br></pre></td></tr></table></figure>
<p>4: 统计某目录(包含子目录)下的所有包含关键子的文件个数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls -lR 目录路径 | grep 关键字 | wc -l</span><br><span class="line">或：</span><br><span class="line">ls -l <span class="string">"目录路径"</span> | grep <span class="string">"关键字"</span> | wc -l</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计 /home/xxxx 下所有文件名称包含关键字"shell"的文件个数</span></span><br><span class="line">ls -lR /home/xxxx | grep shell | wc -l</span><br><span class="line">或：</span><br><span class="line">ls -l <span class="string">"/home/xxxx"</span> | grep <span class="string">"shell"</span> | wc -l</span><br></pre></td></tr></table></figure>
<h3 id="统计代码行数"><a href="#统计代码行数" class="headerlink" title="统计代码行数"></a>统计代码行数</h3><blockquote>
<p>年底又要统计代码工作量了，总不能一个一个文件找吧。 试试 wc 这个命令吧。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wc -l /usr/bin/*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计 /usr/bin/ 目录下所有代码文件的代码行数</span></span><br><span class="line"><span class="comment"># 该命令会输出该目录下每个代码文件的代码行数，最后输出总代码行数</span></span><br></pre></td></tr></table></figure>
<h2 id="scp-命令：不同节点间复制文件或者文件夹"><a href="#scp-命令：不同节点间复制文件或者文件夹" class="headerlink" title="scp 命令：不同节点间复制文件或者文件夹"></a>scp 命令：不同节点间复制文件或者文件夹</h2><blockquote>
<p>Linux scp 命令用于 Linux 之间复制文件和目录。<br>scp 是 secure copy的缩写, scp 是 linux 系统下基于 ssh 登陆进行安全的远程文件拷贝命令。</p>
</blockquote>
<p><strong>Note:</strong> 请先确保集群中的各个节点间可以使用 SSH 免密登录。</p>
<h3 id="从本地复制文件"><a href="#从本地复制文件" class="headerlink" title="从本地复制文件"></a>从本地复制文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp local_file remote_username@remote_ip:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_username@remote_ip:remote_file </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_ip:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_ip:remote_file</span><br></pre></td></tr></table></figure>
<p>eg:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp /home/space/music/1.mp3 root@1.1.1.5:/home/root/others/music </span><br><span class="line">scp /home/space/music/1.mp3 root@1.1.1.5:/home/root/others/music/001.mp3 </span><br><span class="line">scp /home/space/music/1.mp3 1.1.1.5:/home/root/others/music </span><br><span class="line">scp /home/space/music/1.mp3 1.1.1.5:/home/root/others/music/001.mp3</span><br></pre></td></tr></table></figure>
<h3 id="从本地复制文件夹"><a href="#从本地复制文件夹" class="headerlink" title="从本地复制文件夹"></a>从本地复制文件夹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -r local_folder remote_username@remote_ip:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp -r local_folder remote_ip:remote_folder</span><br></pre></td></tr></table></figure>
<p>eg:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp -r /home/space/music/ root@1.1.1.6:/home/root/others/ </span><br><span class="line">scp -r /home/space/music/ 1.1.1.6:/home/root/others/</span><br></pre></td></tr></table></figure>
<h3 id="复制文件到远程"><a href="#复制文件到远程" class="headerlink" title="复制文件到远程"></a>复制文件到远程</h3><p>从远程复制到本地，只要将从本地复制到远程的命令的后 2 个参数调换顺序即可，如下实例</p>
<p>eg：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">scp root@1.1.1.6:/home/root/others/music /home/space/music/1.mp3 </span><br><span class="line">scp -r 1.1.1.6:/home/root/others/ /home/space/music/</span><br></pre></td></tr></table></figure>
<h2 id="tail-命令"><a href="#tail-命令" class="headerlink" title="tail 命令"></a>tail 命令</h2><p>tail 命令依照要求将指定的文件的最后部分输出到标准设备，通常是终端，通俗讲来，就是把某个文件的最后几行显示到终端上，假设该文件有更新，tail 会自己主动刷新，确保你看到最新的输出内容，常用于监控 log 日志的输出等。</p>
<p>eg：</p>
<h3 id="tail-f"><a href="#tail-f" class="headerlink" title="tail -f"></a>tail -f</h3><p><strong>1/</strong> tail -f filename</p>
<p>监控 filename 文件的尾部内容（默认 10 行，相当于增加参数 -n 10），实时刷新显示在屏幕上。 按下 「 CTRL + C 」 退出，。</p>
<p><strong>2/</strong> tail -n 20 filename</p>
<p>显示 filename 最后 20 行。</p>
<p><strong>3/</strong> tail -r -n 10 filename</p>
<p>逆序显示 filename 最后 10 行。</p>
<h2 id="grep-命令"><a href="#grep-命令" class="headerlink" title="grep 命令"></a>grep 命令</h2><p>Linux grep 命令用于查找文件里符合条件的字符串。常见的几个配置参数使用说明如下表格：</p>
<table>
<thead>
<tr>
<th>No</th>
<th>params</th>
<th>explain</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>–version or -V</td>
<td>该命令的版本号</td>
</tr>
<tr>
<td>2</td>
<td>-A N</td>
<td>找到所有的匹配行，并显示匹配行后 N 行</td>
</tr>
<tr>
<td>3</td>
<td>-B N</td>
<td>找到所有的匹配行，并显示匹配行前面 N 行</td>
</tr>
<tr>
<td>4</td>
<td>-b</td>
<td>显示匹配到的字符在文件中的偏移地址</td>
</tr>
<tr>
<td>5</td>
<td>-c</td>
<td>显示有多少行被匹配到</td>
</tr>
<tr>
<td>6</td>
<td>–color</td>
<td>把匹配到的字符用颜色显示出来</td>
</tr>
<tr>
<td>7</td>
<td>-e</td>
<td>可以使用多个正则表达式</td>
</tr>
<tr>
<td>8</td>
<td>-f FILEA FILEB</td>
<td>FILEA 在 FILEAB 中的匹配</td>
</tr>
<tr>
<td>9</td>
<td>-i</td>
<td>不区分大小写针对单个字符</td>
</tr>
<tr>
<td>10</td>
<td>-m N</td>
<td>最多匹配 N 个后停止</td>
</tr>
<tr>
<td>11</td>
<td>-n</td>
<td>打印行号</td>
</tr>
<tr>
<td>12</td>
<td>-o</td>
<td>只打印出匹配到的字符</td>
</tr>
<tr>
<td>13</td>
<td>-R</td>
<td>搜索子目录</td>
</tr>
<tr>
<td>14</td>
<td>-v</td>
<td>显示不包括查找字符的所有行</td>
</tr>
</tbody>
</table>
<p>这里举这几个常用的参数的例子：</p>
<p>-v : 反转匹配输出。<br>-w : 精确匹配输出。<br>-c : 输出能匹配到的列数。</p>
<p>eg: /etc/hosts 文件中包含如下内容 [cat /etc/hosts]：</p>
<blockquote>
<p>127.0.0.1 xxxx xxxx xxxx xxxx<br>::1       xxxx xxxx xxxx xxxx<br>x.x.x.x   xxxx xxxx xxxx xxxx<br>x.x.x.x   xxxx xxxx xxxx xxxx</p>
</blockquote>
<p>则使用举例和输出如下：</p>
<p><strong>1</strong> 使用 -v 过滤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/hosts | grep -v 127 | grep -v ::1</span><br></pre></td></tr></table></figure>
<p>则输出将前两行过滤了，输出如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x.x.x.x   xxxx xxxx xxxx xxxx</span><br><span class="line">x.x.x.x   xxxx xxxx xxxx xxxx</span><br></pre></td></tr></table></figure>
<p><strong>2</strong> 使用 -w 精确匹配</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/hosts | grep -w 127</span><br></pre></td></tr></table></figure>
<p>则精确匹配搭配包含 「 127 」 的行，输出如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 xxxx xxxx xxxx xxxx</span><br></pre></td></tr></table></figure>
<p><strong>3</strong> 使用 -c 输出匹配的行数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/hosts | grep -c 127</span><br></pre></td></tr></table></figure>
<p>则精确匹配搭配包含 「 127 」 的行数为 1 ，输出如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ 1</span><br></pre></td></tr></table></figure>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] <a href="http://blog.sina.com.cn/s/blog_464f6dba01012vwv.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_464f6dba01012vwv.html</a><br>[2] <a href="http://www.runoob.com/linux/linux-comm-scp.html" target="_blank" rel="noopener">http://www.runoob.com/linux/linux-comm-scp.html</a><br>[3] <a href="https://www.jianshu.com/p/4131d09ff592" target="_blank" rel="noopener">https://www.jianshu.com/p/4131d09ff592</a><br>[4] <a href="http://www.runoob.com/linux/linux-comm-grep.html" target="_blank" rel="noopener">http://www.runoob.com/linux/linux-comm-grep.html</a></p>
<hr>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2016/12/30/In-me-past-present-future-meet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/30/In-me-past-present-future-meet/" itemprop="url">
                  In me, past, present, future meet
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-12-30 19:23:25" itemprop="dateCreated datePublished" datetime="2016-12-30T19:23:25+08:00">2016-12-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2017-11-21 19:44:44" itemprop="dateModified" datetime="2017-11-21T19:44:44+08:00">2017-11-21</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/12/30/In-me-past-present-future-meet/" class="leancloud_visitors" data-flag-title="In me, past, present, future meet">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://o8zyn0sct.qnssl.com/2016-end.jpg" alt="2016-end"></p>
<p>岁末，丁酉如约而至；于实验室，偏安一隅，忽然想起了这首诗来：</p>
<blockquote>
<p>In me, past, present, future meet<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;– Siegfried Sassoon</p>
</blockquote>
<blockquote>
<p>To hold long chiding conference.<br>My lusts usurp the present tense<br>And strangle Reason in his seat.<br>My loves leap through the future’s fence<br>To dance with dream-enfranchised feet.<br>&lt;/br<br>In me the cave-man clasps the seer,<br>And garlanded Apollo goes<br>Chanting to Abraham’s deaf ear.<br>In me the tiger sniffs the rose.<br>Look in my heart, kind friends, and tremble,<br>Since there your elements assemble.</p>
</blockquote>
<p>翻译过来，是这样的：</p>
<blockquote>
<p>于我，过去，现在以及未来<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;– [英] 西格夫里·萨松（余光中 译）</p>
</blockquote>
<blockquote>
<p>商谈着，各执一词，纷纷扰扰<br>林林总总的欲望，掠取着我的现在<br>将理性扼杀于它的宝座<br>我的爱情纷纷越过未来的藩篱<br>梦想解放出双脚，舞蹈着<br><br>于我，穴居者攫取了先知<br>佩带花环的阿波罗<br>向亚伯拉罕的聋耳边吟唱<br>我心里有猛虎在细嗅着蔷薇<br>审视我的心灵吧，亲爱的朋友，你应战栗<br>因为那里才是你本来的面目</p>
</blockquote>
<p>好一句 “心有猛虎，细嗅蔷薇”<br>有人缀后一句 “盛宴之后，泪流满面”<br>却别有一翻滋味</p>
<p>岁尾，回首往昔之事，心中难免多了点平静和淡然<br>写下这些文字，记录我匆匆地 2016</p>
<p>对于明天 - 2017<br>我很期待，希望它是这个样子：</p>
<p><img src="https://o8zyn0sct.qnssl.com/2017-github.jpg" alt="2017-begin"></p>
<p>这一年，时间走得急了些，好多还没来得及告别<br>这一年，过得不易，还好一切都已过去，最后只剩一句：</p>
<blockquote>
<p>2016，莎呦娜啦 <br>Hi, 2017</p>
</blockquote>
<!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=167670&auto=0&height=66">
</iframe> -->
<audio src="https://o8zyn0sct.qnssl.com/%E4%BF%A1%20-%20%E8%8E%8E%E5%91%A6%E5%93%AA%E5%95%A6.mp3" controls="controls" preload="preload" autoplay="autoplay"><br>Your browser does not support the audio element.<br></audio>

<p><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 2016.12.30 于实验室跨年夜前夕</p>
<hr>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2016/12/13/命令行中的手机录屏及转Gif工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/13/命令行中的手机录屏及转Gif工具/" itemprop="url">
                  命令行中的手机录屏及转Gif工具
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-12-13 19:56:35" itemprop="dateCreated datePublished" datetime="2016-12-13T19:56:35+08:00">2016-12-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2017-11-21 19:44:44" itemprop="dateModified" datetime="2017-11-21T19:44:44+08:00">2017-11-21</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Tools/" itemprop="url" rel="index"><span itemprop="name">Tools</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/12/13/命令行中的手机录屏及转Gif工具/" class="leancloud_visitors" data-flag-title="命令行中的手机录屏及转Gif工具">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="想法"><a href="#想法" class="headerlink" title="想法"></a>想法</h2><p>最近，一直在找一个 Android 手机屏幕录制软件：像 Gif 动态图一样显示 App 的演示效果。上 Google Play 找了几款免费的软件，悲催的是大多数都是基于 Android 5.0 以上的系统，对于我手中的 4.4 系统 — 然并卵！！！</p>
<p>试着 Google 了一把，几个 <strong>ADB + Gif</strong> （懂行的你看就明白了） 关键词吸引了我，于是顺着如下两篇文章的指引，我成功了：</p>
<blockquote>
<p><a href="https://www.aswifter.com/2015/07/10/android-record-video-to-gif/" target="_blank" rel="noopener">https://www.aswifter.com/2015/07/10/android-record-video-to-gif/</a><br><br><a href="http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/" target="_blank" rel="noopener">http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/</a></p>
</blockquote>
<p>自己玩出来的效果是这样的：</p>
<p><img src="https://o8zyn0sct.qnssl.com/showtime.gif" alt="showtime"></p>
<hr>
<h2 id="如何做成的？"><a href="#如何做成的？" class="headerlink" title="如何做成的？"></a>如何做成的？</h2><p>相信看了上文的两篇文章，你已经知道如何使用了，我这里再罗嗦两句。其实，是借助 Android SDK 中自带的 <a href="https://wiki.cyanogenmod.org/w/Doc:_adb_intro/zh-cn" target="_blank" rel="noopener">ADB</a> 工具，使用 ADB 命令外加几个命令行的工具转化即可。相关工具如下：</p>
<ul>
<li>ADB: Android App 开发的都知道，用它录制手机屏幕演示视频</li>
<li>ffmpeg: 一个视频操作工具，用它把录制的 mp4 视频转化为 gif</li>
<li>数据线: 使用 ADB 时, 要跟电脑连接啊</li>
</ul>
<p><strong>忘了申明了，我在 Ubuntu 系统下测试的， Win | Mac 用户顺着原理找工具吧。</strong></p>
<hr>
<h3 id="制作-Mp4"><a href="#制作-Mp4" class="headerlink" title="制作 Mp4"></a>制作 Mp4</h3><p>将手机和电脑保持连接，找到自己的 Android SDK 保存位置，在 SDK/platform-tools/ 目录下找到 ADB 工具，就可以开始敲命令了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换至 ADB 工具目录下</span></span><br><span class="line"><span class="built_in">cd</span> Android/Sdk/platform-tools/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 ADB Shell 命令, 同时操作手机录制 Mp4，</span></span><br><span class="line"><span class="comment"># 录制完成后，视频被保存在手机 sdcard 下，名为 showtime.mp4</span></span><br><span class="line">./adb shell screenrecord --size 848x480 --bit-rate 2000000 /sdcard/showtime.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 pull 命令将视频拉到电脑本地</span></span><br><span class="line">./adb pull /sdcard/showtime.mp4 /home/dm/gif/</span><br></pre></td></tr></table></figure>
<p><strong>注意命令行参数：</strong></p>
<ul>
<li>screenrecord: 顾名思义，录屏的</li>
<li>–size 848x480: 定义视频大小</li>
<li>–bit-rate 2000000: 修改比特率为 2M/s (默认比特率是 4M/s )</li>
</ul>
<p>更多参数解析查 DOC 吧。</p>
<hr>
<h3 id="Mp4-转-Gif"><a href="#Mp4-转-Gif" class="headerlink" title="Mp4 转 Gif"></a>Mp4 转 Gif</h3><p>制成 Mp4 视频后，转化为 Gif 格式的工具就多了，这里使用 Ubuntu 下强大的 ffmpeg 视频操作库：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 ffmpeg</span></span><br><span class="line">sudo add-apt-repository ppa:kirillshkrogalev/ffmpeg-next</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install ffmpeg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到Mp4目录下</span></span><br><span class="line"><span class="built_in">cd</span> /home/dm/gif</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mp4 -&gt; gif： -b 2048k 转化为高质量gif</span></span><br><span class="line">ffmpeg -i showtime.mp4 -b 2048k showtime.gif</span><br></pre></td></tr></table></figure></p>
<p>ffmpeg 命令参数请看参考资料2吧，很详细。</p>
<hr>
<h2 id="另外"><a href="#另外" class="headerlink" title="另外"></a>另外</h2><p>有时，我们可能需要将几张图片合成为一个 gif，这里再介绍一个搞定这个需求的方法：</p>
<blockquote>
<p><a href="http://blog.csdn.net/liuxiabing150/article/details/45872783" target="_blank" rel="noopener">convert</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 convert</span></span><br><span class="line">sudo  apt-get install imagemagick</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换的图片目录下</span></span><br><span class="line"><span class="built_in">cd</span> /home/dm/pic/</span><br><span class="line"></span><br><span class="line"><span class="comment"># *.png -&gt; gif</span></span><br><span class="line">convert -delay 100 *.png test.gif</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] <a href="https://www.aswifter.com/2015/07/10/android-record-video-to-gif/" target="_blank" rel="noopener">https://www.aswifter.com/2015/07/10/android-record-video-to-gif/</a><br>[2] <a href="http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/" target="_blank" rel="noopener">http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/</a></p>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><hr>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://absentm.github.io/2016/11/21/Android-RecyclerView-Demo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AbsentM">
      <meta itemprop="description" content="Avenue to Jane!">
      <meta itemprop="image" content="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AbsentM's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/21/Android-RecyclerView-Demo/" itemprop="url">
                  Android RecyclerView Demo
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-21 15:17:16" itemprop="dateCreated datePublished" datetime="2016-11-21T15:17:16+08:00">2016-11-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2017-11-21 19:44:44" itemprop="dateModified" datetime="2017-11-21T19:44:44+08:00">2017-11-21</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Android-Notes/" itemprop="url" rel="index"><span itemprop="name">Android Notes</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/11/21/Android-RecyclerView-Demo/" class="leancloud_visitors" data-flag-title="Android RecyclerView Demo">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="想法"><a href="#想法" class="headerlink" title="想法"></a>想法</h2><p>RecyclerView 出来已经有好长时间了, 在自己的项目中却一直没有使用 … 这几天查阅了相关资料, 一步步地 check 着这个熟悉而又陌生的家伙, 自此爱不释手。</p>
<p>官方是这样介绍的:</p>
<blockquote>
<p>RecyclerView is a more advanced and flexible version of ListView. This widget is a container for large sets of views that can be recycled and scrolled very efficiently. Use the RecyclerView widget when you have lists with elements that change dynamically.</p>
</blockquote>
<p>写了一个 Demo, 包涵了如下功能, 下文也将依次以此展开 (适合新手, 大神绕道)：</p>
<ol>
<li>RecyclerView 控件的基本用法 ;</li>
<li>item 的 Click, LongClick 事件处理 ;</li>
<li>同一样式的 Item 不同布局的展示 ;</li>
<li>Item 控件的状态变化处理, 如阅读痕迹等 …</li>
</ol>
<p>写着写着, 大致有了如此模样:</p>
<figure class="third"><br>    <img src="https://o8zyn0sct.qnssl.com/RecyclerView-Demo-1.jpg" height="400" width="240"><br>    <img src="https://o8zyn0sct.qnssl.com/RecyclerView-Demo-2.png" height="400" width="240"><br>    <img src="https://o8zyn0sct.qnssl.com/RecyclerView-Demo-3-new.png" height="400" width="240"><br></figure>

<figure class="third"><br>    <img src="https://o8zyn0sct.qnssl.com/RecyclerView-Demo-4.png" height="400" width="240"><br>    <img src="https://o8zyn0sct.qnssl.com/RecyclerView-Demo-5.png" height="400" width="240"><br>    <img src="https://o8zyn0sct.qnssl.com/RecyclerView-Demo-6.png" height="400" width="240"><br></figure>

<p><br><strong>Demo 代码放在了这里:</strong><br><a href="https://github.com/absentm/Demo" target="_blank" rel="noopener">https://github.com/absentm/Demo</a><br><strong>Apk 下载地址:</strong><br><a href="https://github.com/absentm/Demo/blob/master/apk/RecyclerViewDemo.apk" target="_blank" rel="noopener">https://github.com/absentm/Demo/blob/master/apk/RecyclerViewDemo.apk</a></p>
<hr>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><h3 id="添加包引用"><a href="#添加包引用" class="headerlink" title="添加包引用"></a>添加包引用</h3><p>在 Gradle 文件中添加 recyclerview 的包引用, cardview 也顺便加上吧:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.android.support:recyclerview-v7:24.+&apos;</span><br><span class="line">compile &apos;com.android.support:cardview-v7:24.+&apos;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="XML-中定义"><a href="#XML-中定义" class="headerlink" title="XML 中定义"></a>XML 中定义</h3><p>这个很基本了, 长这样就 ok :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.v7.widget.RecyclerView</span><br><span class="line">    android:id=&quot;@+id/recyclerview&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot; /&gt;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="Activity-中初始化"><a href="#Activity-中初始化" class="headerlink" title="Activity 中初始化"></a>Activity 中初始化</h3><p>在 Activity 中需要查找 id , 初始化布局管理器（LayoutManager）, 设置Adapter等, 大致如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mRecyclerView = (RecyclerView) findViewById(R.id.recyclerview);</span><br><span class="line">mMainPagesAdapter = new MainPagesAdapter(MainActivity.this, mDatas);</span><br><span class="line">mLayoutManager = new LinearLayoutManager(MainActivity.this, LinearLayoutManager.VERTICAL, false);</span><br><span class="line"></span><br><span class="line">mRecyclerView.setAdapter(mMainPagesAdapter);</span><br><span class="line">mRecyclerView.setLayoutManager(mLayoutManager);</span><br><span class="line">mRecyclerView.setItemAnimator(new DefaultItemAnimator());//默认动画</span><br><span class="line">mRecyclerView.setHasFixedSize(true);//效率最高</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Adapter-构造适配器"><a href="#Adapter-构造适配器" class="headerlink" title="Adapter 构造适配器"></a>Adapter 构造适配器</h3><p>到这里, 当和 ListView 做对比时, 可以发现 RecyclerView 似乎是在强制开发者使用 ListView 的 ViewHolder 模式, Adapter 的代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">import android.content.Context;</span><br><span class="line">import android.graphics.Color;</span><br><span class="line">import android.support.v7.widget.RecyclerView;</span><br><span class="line">import android.view.LayoutInflater;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.view.ViewGroup;</span><br><span class="line">import android.widget.ImageView;</span><br><span class="line">import android.widget.TextView;</span><br><span class="line"></span><br><span class="line">import com.bumptech.glide.Glide;</span><br><span class="line">import com.bumptech.glide.load.engine.DiskCacheStrategy;</span><br><span class="line">import com.dm.recyclerviewdemo.R;</span><br><span class="line">import com.dm.recyclerviewdemo.beans.NewsBean;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * MainPagesAdapter</span><br><span class="line"> * Created by dm on 16-11-17.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class MainPagesAdapter</span><br><span class="line">        extends RecyclerView.Adapter&lt;MainPagesAdapter.ItemContentHolder&gt;</span><br><span class="line">        implements View.OnClickListener, View.OnLongClickListener &#123;</span><br><span class="line"></span><br><span class="line">    private Context context;</span><br><span class="line">    private List&lt;NewsBean&gt; mDatas;</span><br><span class="line"></span><br><span class="line">    public MainPagesAdapter(Context context, List&lt;NewsBean&gt; datas) &#123;</span><br><span class="line">        this.context = context;</span><br><span class="line">        mDatas = datas;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public ItemContentHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;</span><br><span class="line">        View view = LayoutInflater.from(context).inflate(R.layout.main_news_item, parent, false);</span><br><span class="line"></span><br><span class="line">        MainPagesAdapter.ItemContentHolder viewHolder = new MainPagesAdapter.ItemContentHolder(view);</span><br><span class="line">        return viewHolder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onBindViewHolder(ItemContentHolder holder, int position) &#123;</span><br><span class="line">        // 使用Glide图片缓存框架加载图</span><br><span class="line">        Glide.with(context)</span><br><span class="line">                .load(mDatas.get(position).getPicUrl())</span><br><span class="line">                .error(R.drawable.icon)</span><br><span class="line">                .diskCacheStrategy(DiskCacheStrategy.ALL)</span><br><span class="line">                .crossFade()</span><br><span class="line">                .centerCrop()</span><br><span class="line">                .into(holder.newsItemImv);</span><br><span class="line">        holder.newsItemTitleTv.setText(mDatas.get(position).getTitle());</span><br><span class="line">        holder.newsItemTimeTv.setText(mDatas.get(position).getCtime());</span><br><span class="line"></span><br><span class="line">        // 将数据保存在itemView的Tag中，以便点击时进行获取</span><br><span class="line">        holder.itemView.setTag(mDatas.get(position));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int getItemCount() &#123;</span><br><span class="line">        return mDatas == null ? 0 : mDatas.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class ItemContentHolder extends RecyclerView.ViewHolder &#123;</span><br><span class="line">        ImageView newsItemImv;</span><br><span class="line">        TextView newsItemTitleTv;</span><br><span class="line">        TextView newsItemTimeTv;</span><br><span class="line"></span><br><span class="line">        public ItemContentHolder(View itemView) &#123;</span><br><span class="line">            super(itemView);</span><br><span class="line">            newsItemImv = (ImageView) itemView.findViewById(R.id.main_item_image_imv);</span><br><span class="line">            newsItemTitleTv = (TextView) itemView.findViewById(R.id.main_item_title_tv);</span><br><span class="line">            newsItemTimeTv = (TextView) itemView.findViewById(R.id.main_item_time_tv);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="数据源-mDatas"><a href="#数据源-mDatas" class="headerlink" title="数据源 mDatas"></a>数据源 mDatas</h3><p>完成了以上操作, 还需要加载我们的数据。 Demo 的数据来自 <a href="http://apistore.baidu.com/apiworks/servicedetail/768.html" target="_blank" rel="noopener">ApiStore 的娱乐新闻</a> , 请求网络后返回 Json 格式数据。所以, 需要进行Json数据解析。</p>
<p>本文使用 Thread + Handler + Gson 技术进行网络数据加载和解析, 该技术的使用方法可参看我的这些文章:</p>
<blockquote>
<p><a href="https://absentm.github.io/2015/03/24/Java%E4%B8%ADGson%E7%9A%84%E4%BD%BF%E7%94%A8/">Java中Gson的使用</a><br><a href="https://absentm.github.io/2015/03/28/Java%E4%B8%AD%E4%BD%BF%E7%94%A8Gson%E8%A7%A3%E6%9E%90json%E6%95%B0%E6%8D%AE/">Java中使用Gson解析json数据</a><br><a href="https://absentm.github.io/2015/04/20/Android-%E4%BD%BF%E7%94%A8Thread-Handler%E5%AE%9E%E7%8E%B0%E9%9D%9EUI%E7%BA%BF%E7%A8%8B%E6%9B%B4%E6%96%B0UI%E7%95%8C%E9%9D%A2/">Android 使用Thread+Handler实现非UI线程更新UI界面</a></p>
</blockquote>
<p>数据加载和填充的核心代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">// 发送网络请求, 获取数据</span><br><span class="line">isConnect = SystemUtils.checkNetworkConnection(MainActivity.this);</span><br><span class="line">if (isConnect) &#123;</span><br><span class="line">    new Thread(new Runnable() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            String newsDatas = SystemUtils.getNewsJsonStr();</span><br><span class="line">            Log.i(TAG, &quot;newsDatas &gt;&gt;&gt; &quot; + newsDatas);</span><br><span class="line">            if (!newsDatas.equals(&quot;&quot;)) &#123;</span><br><span class="line">                Message message = mHandler.obtainMessage();</span><br><span class="line">                message.obj = newsDatas;</span><br><span class="line">                mHandler.sendMessage(message);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                mProgressBar.setVisibility(View.GONE);</span><br><span class="line">                Snackbar.make(mCoordinatorLayout, &quot;数据加载出错 !!!&quot;,</span><br><span class="line">                        Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).start();</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    Snackbar.make(mCoordinatorLayout, &quot;No NetWork !!!&quot;,</span><br><span class="line">            Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();</span><br><span class="line">    mProgressBar.setVisibility(View.GONE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 解析数据, 填充到控件上</span><br><span class="line">private Handler mHandler = new Handler() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void handleMessage(Message msg) &#123;</span><br><span class="line">        String newsJsonStr = msg.obj.toString();</span><br><span class="line">        Log.d(&quot;FindVideoAty&quot;, &quot; Json: &quot; + newsJsonStr);</span><br><span class="line"></span><br><span class="line">        Gson gson = new Gson();</span><br><span class="line">        NewsInfosBean newsInfosBean = gson.fromJson(newsJsonStr, NewsInfosBean.class);</span><br><span class="line">        if (newsInfosBean.getCode() == 200) &#123;</span><br><span class="line">            mDatas = newsInfosBean.getNewslist();</span><br><span class="line"></span><br><span class="line">            MainPagesAdapter.layoutFlag = 0;</span><br><span class="line">            mMainPagesAdapter = new MainPagesAdapter(MainActivity.this, mDatas);</span><br><span class="line">            mLayoutManager = new LinearLayoutManager(MainActivity.this,</span><br><span class="line">                    LinearLayoutManager.VERTICAL, false);</span><br><span class="line">            mRecyclerView.setAdapter(mMainPagesAdapter);</span><br><span class="line">            mRecyclerView.setLayoutManager(mLayoutManager);</span><br><span class="line">            mRecyclerView.setItemAnimator(new DefaultItemAnimator());//默认动画</span><br><span class="line">            mRecyclerView.setHasFixedSize(true);//效率最高</span><br><span class="line"></span><br><span class="line">            mMainPagesAdapter.setOnItemClickListener(MainActivity.this);</span><br><span class="line">            mMainPagesAdapter.setOnItemLongClickListener(MainActivity.this);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            Snackbar.make(mCoordinatorLayout, &quot;数据加载出错 !!!&quot;,</span><br><span class="line">                    Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mProgressBar.setVisibility(View.GONE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="Click-事件监听"><a href="#Click-事件监听" class="headerlink" title="Click 事件监听"></a>Click 事件监听</h2><p>以上基本上是 RecyclerView 的用法过程了, 但是 Google 却没有没给我们提供相应 Item 的点击事件处理, 我们需要自己改写自己的Adapter实现:</p>
<h3 id="修改-Adapter"><a href="#修改-Adapter" class="headerlink" title="修改 Adapter"></a>修改 Adapter</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">// 使 Adapter implements View.OnClickListener, View.OnLongClickListener事件监听</span><br><span class="line">public class MainPagesAdapter</span><br><span class="line">        extends RecyclerView.Adapter&lt;MainPagesAdapter.ItemContentHolder&gt;</span><br><span class="line">        implements View.OnClickListener, View.OnLongClickListener</span><br><span class="line"></span><br><span class="line">// 设置item点击事件的回调函数</span><br><span class="line">private OnRecyclerViewItemClickListener mOnItemClickListener = null;</span><br><span class="line">// 设置item点击事件的回调函数</span><br><span class="line">private OnRecyclerViewItemLongClickListener mOnItemLongClickListener = null;</span><br><span class="line"></span><br><span class="line">// define interface</span><br><span class="line">public interface OnRecyclerViewItemClickListener &#123;</span><br><span class="line">    void onItemClick(View view, NewsBean data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// define interface</span><br><span class="line">public interface OnRecyclerViewItemLongClickListener &#123;</span><br><span class="line">    void onItemLongClick(View view, NewsBean data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 提供外部 Activity 的实现方法</span><br><span class="line">public void setOnItemClickListener(MainPagesAdapter.OnRecyclerViewItemClickListener listener) &#123;</span><br><span class="line">    this.mOnItemClickListener = listener;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void setOnItemLongClickListener(MainPagesAdapter.OnRecyclerViewItemLongClickListener listener) &#123;</span><br><span class="line">    this.mOnItemLongClickListener = listener;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 在 Adapter 中的 onCreateViewHolder 方法中创建的View注册点击事件</span><br><span class="line">view.setOnClickListener(this);</span><br><span class="line">view.setOnLongClickListener(this);</span><br><span class="line"></span><br><span class="line">// 在 Adapter 中重写 View 的 onClick 和 onLongClick 方法</span><br><span class="line">@Override</span><br><span class="line">public void onClick(View view) &#123;</span><br><span class="line">    if (mOnItemClickListener != null) &#123;</span><br><span class="line">        //注意这里使用getTag方法获取数据</span><br><span class="line">        mOnItemClickListener.onItemClick(view, (NewsBean) view.getTag());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public boolean onLongClick(View view) &#123;</span><br><span class="line">    if (mOnItemLongClickListener != null) &#123;</span><br><span class="line">        mOnItemLongClickListener.onItemLongClick(view, (NewsBean) view.getTag());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注释较详细, 详见上文 Demo 的 Github 地址。</p>
<hr>
<h3 id="在-Activity-中处理-Item-点击事件的逻辑"><a href="#在-Activity-中处理-Item-点击事件的逻辑" class="headerlink" title="在 Activity 中处理 Item 点击事件的逻辑"></a>在 Activity 中处理 Item 点击事件的逻辑</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 使 Activity 实现上述 Adapter 中定义的 Click 事件接口</span><br><span class="line">public class MainActivity extends BaseActivity implements</span><br><span class="line">        MainPagesAdapter.OnRecyclerViewItemClickListener,</span><br><span class="line">        MainPagesAdapter.OnRecyclerViewItemLongClickListener</span><br><span class="line"></span><br><span class="line">// 重写 Adapter 的 onItemClick， onItemLongClick 方法</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onItemClick(View view, NewsBean data) &#123;</span><br><span class="line">    // 可以跳转到 Item 的详情页面</span><br><span class="line">    Toast.make(MainActivity.this, &quot;data: &quot;</span><br><span class="line">    + data.getTitle, Toast.LENGTH_LONG).show();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onItemLongClick(View view, final NewsBean data) &#123;</span><br><span class="line">    // 可以设置状态标记</span><br><span class="line">    Toast.make(MainActivity.this, &quot;data: &quot;</span><br><span class="line">    + data.getCtime, Toast.LENGTH_LONG).show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样点击事件的处理逻辑就 OK 了！</p>
<hr>
<h2 id="Item-状态变换处理"><a href="#Item-状态变换处理" class="headerlink" title="Item 状态变换处理"></a>Item 状态变换处理</h2><p>有时候, 我们还有这样的需求:</p>
<blockquote>
<p>在列表中点击一个 Item 之后, 被点击的 Item 控件的字体颜色, 背景颜色或者图片是否显示等发生改变, 表现出和其他 Item 不一样的呈现状态。（如新闻点击阅读后, 当前新闻 Item 颜色变浅等）</p>
</blockquote>
<p>我们的处理思路是: 在数据 Bean 中添加标记状态, 当 Item 的点击事件发生时改变当前数据 Bean 的标记状态, 之后使用 notifyDataSetChanged() 通知 Adapter 数据改变, 更新 UI 界面。因此, 需要如下代码处理。</p>
<h3 id="数据-Bean-中添加标记属性"><a href="#数据-Bean-中添加标记属性" class="headerlink" title="数据 Bean 中添加标记属性"></a>数据 Bean 中添加标记属性</h3><p>添加一个 isSelected 属性, 用于数据标记。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">import java.io.Serializable;</span><br><span class="line"></span><br><span class="line">public class NewsBean implements Serializable &#123;</span><br><span class="line">    private String ctime;           // 新闻发布时间</span><br><span class="line">    private String title;           // 新闻标题</span><br><span class="line">    private String description;     // 新闻描述</span><br><span class="line">    private String picUrl;          // 新闻配图</span><br><span class="line">    private String url;             // 新闻链接地址</span><br><span class="line"></span><br><span class="line">    private boolean isSelected = false;     // 是否已读</span><br><span class="line"></span><br><span class="line">    public NewsBean() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getCtime() &#123;</span><br><span class="line">        return ctime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCtime(String ctime) &#123;</span><br><span class="line">        this.ctime = ctime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getTitle() &#123;</span><br><span class="line">        return title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setTitle(String title) &#123;</span><br><span class="line">        this.title = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getDescription() &#123;</span><br><span class="line">        return description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setDescription(String description) &#123;</span><br><span class="line">        this.description = description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPicUrl() &#123;</span><br><span class="line">        return picUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPicUrl(String picUrl) &#123;</span><br><span class="line">        this.picUrl = picUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUrl() &#123;</span><br><span class="line">        return url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUrl(String url) &#123;</span><br><span class="line">        this.url = url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public boolean isSelected() &#123;</span><br><span class="line">        return isSelected;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSelected(boolean selected) &#123;</span><br><span class="line">        isSelected = selected;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p></p>
<hr>
<h3 id="Adapter-中根据-Bean-的标记状态设置不同显示效果"><a href="#Adapter-中根据-Bean-的标记状态设置不同显示效果" class="headerlink" title="Adapter 中根据 Bean 的标记状态设置不同显示效果"></a>Adapter 中根据 Bean 的标记状态设置不同显示效果</h3><p>在 Adapter 中的 onBindViewHolder()方法中设置 Item 的不同加载状态。<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onBindViewHolder(ItemContentHolder holder, int position) &#123;</span><br><span class="line">    // 使用Glide图片缓存框架加载图</span><br><span class="line">    Glide.with(context)</span><br><span class="line">            .load(mDatas.get(position).getPicUrl())</span><br><span class="line">            .error(R.drawable.icon)</span><br><span class="line">            .diskCacheStrategy(DiskCacheStrategy.ALL)</span><br><span class="line">            .crossFade()</span><br><span class="line">            .centerCrop()</span><br><span class="line">            .into(holder.newsItemImv);</span><br><span class="line">    holder.newsItemTitleTv.setText(mDatas.get(position).getTitle());</span><br><span class="line">    holder.newsItemTimeTv.setText(mDatas.get(position).getCtime());</span><br><span class="line"></span><br><span class="line">    int textColor = Color.parseColor(&quot;#CC000000&quot;);</span><br><span class="line">    int textColorChange = Color.parseColor(&quot;#40000000&quot;);</span><br><span class="line">    if (mDatas.get(position).isSelected()) &#123; // 判断是否标记</span><br><span class="line">        holder.newsItemTitleTv.setTextColor(textColorChange);</span><br><span class="line">        holder.newsItemTimeTv.setTextColor(textColorChange);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        holder.newsItemTitleTv.setTextColor(textColor);</span><br><span class="line">        holder.newsItemTimeTv.setTextColor(textColor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 将数据保存在itemView的Tag中，以便点击时进行获取</span><br><span class="line">    holder.itemView.setTag(mDatas.get(position));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><br>这样根据标记, 数据更新时加载数据, 显示不同的状态。</p>
<hr>
<h3 id="Activtiy-的-Click-方法中更改数据-Bean-标记状态"><a href="#Activtiy-的-Click-方法中更改数据-Bean-标记状态" class="headerlink" title="Activtiy 的 Click() 方法中更改数据 Bean 标记状态"></a>Activtiy 的 Click() 方法中更改数据 Bean 标记状态</h3><p>这样在相应的 Activity 中, 当点击事件发生时, 修改相关 Item 数据并通知 Adapter.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onItemClick(View view, NewsBean data) &#123;</span><br><span class="line">    // 标记已读，设置标记位</span><br><span class="line">    data.setSelected(true);</span><br><span class="line">    mMainPagesAdapter.notifyDataSetChanged();</span><br><span class="line"></span><br><span class="line">    // 跳转至详情页</span><br><span class="line">    Intent intent = new Intent();</span><br><span class="line">    Bundle bundle = new Bundle();</span><br><span class="line">    bundle.putSerializable(&quot;newsInfos&quot;, data);</span><br><span class="line">    intent.setClass(MainActivity.this, ItemDetailAty.class);</span><br><span class="line">    intent.putExtras(bundle);</span><br><span class="line">    startActivity(intent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onItemLongClick(View view, final NewsBean data) &#123;</span><br><span class="line">    new MaterialDialog.Builder(MainActivity.this)</span><br><span class="line">            .title(&quot;标记&quot;)</span><br><span class="line">            .items(R.array.tag_values)</span><br><span class="line">            .itemsCallback(new MaterialDialog.ListCallback() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void onSelection(MaterialDialog dialog,</span><br><span class="line">                                        View itemView,</span><br><span class="line">                                        int position,</span><br><span class="line">                                        CharSequence text) &#123;</span><br><span class="line"></span><br><span class="line">                    String listItemStr = (String) text;</span><br><span class="line">                    Log.d(TAG, &quot;listItemStr &gt;&gt;&gt; &quot; + listItemStr);</span><br><span class="line">                    switch (listItemStr) &#123;</span><br><span class="line">                        case &quot;已读&quot;:</span><br><span class="line">                            data.setSelected(true);</span><br><span class="line">                            mMainPagesAdapter.notifyDataSetChanged();</span><br><span class="line">                            break;</span><br><span class="line">                        case &quot;未读&quot;:</span><br><span class="line">                            data.setSelected(false);</span><br><span class="line">                            mMainPagesAdapter.notifyDataSetChanged();</span><br><span class="line">                            break;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样效果就出来了, 如展示图3所示。</p>
<hr>
<h2 id="样式切换"><a href="#样式切换" class="headerlink" title="样式切换"></a>样式切换</h2><p>RecycleView 的布局管理器为我们提供了不同的布局样式, 如默认的线性列表布局, 网格布局, 瀑布流式布局等。Demo 中也提供了相关不同布局的切换, 如上图4, 5, 6所示。</p>
<p>思路是这样的: 在Adapter设置一个布局加载标志, 根据传回来的不同布局切换标志, 在 Adapter的 onCreateViewHolder() 方法中 inflate不同的布局, 具体做法如下:</p>
<h3 id="Adapter-中添加加载布局标志"><a href="#Adapter-中添加加载布局标志" class="headerlink" title="Adapter 中添加加载布局标志"></a>Adapter 中添加加载布局标志</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static int layoutFlag = 0;</span><br></pre></td></tr></table></figure>
<p>0: 默认卡片布局;<br>1: 无间隔卡片布局;<br>2: 瀑布流式布局;<br>3: 网格布局</p>
<hr>
<h3 id="改写-Adapter-中-onCreateViewHolder-方法"><a href="#改写-Adapter-中-onCreateViewHolder-方法" class="headerlink" title="改写 Adapter 中 onCreateViewHolder()方法"></a>改写 Adapter 中 onCreateViewHolder()方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public ItemContentHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;</span><br><span class="line">    View view;</span><br><span class="line">    switch (layoutFlag) &#123;</span><br><span class="line">        case 0:</span><br><span class="line">            view = LayoutInflater.from(context).inflate(R.layout.main_news_item, parent, false);</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            view = LayoutInflater.from(context).inflate(R.layout.main_news_item_nogap, parent, false);</span><br><span class="line">            break;</span><br><span class="line">        case 2:</span><br><span class="line">        case 3:</span><br><span class="line">            view = LayoutInflater.from(context).inflate(R.layout.main_news_item_flu, parent, false);</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            view = LayoutInflater.from(context).inflate(R.layout.main_news_item, parent, false);</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MainPagesAdapter.ItemContentHolder viewHolder = new MainPagesAdapter.ItemContentHolder(view);</span><br><span class="line">    //将创建的View注册点击事件</span><br><span class="line">    view.setOnClickListener(this);</span><br><span class="line">    view.setOnLongClickListener(this);</span><br><span class="line">    return viewHolder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p></p>
<hr>
<h3 id="Activity-中-Menu-菜单触发布局切换事件"><a href="#Activity-中-Menu-菜单触发布局切换事件" class="headerlink" title="Activity 中 Menu 菜单触发布局切换事件"></a>Activity 中 Menu 菜单触发布局切换事件</h3><p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">// Menu 菜单</span><br><span class="line">&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">      xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">      xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">      tools:context=&quot;com.dm.recyclerviewdemo.activitys.MainActivity&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_cardview&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;@string/action_cardview&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_no_gapview&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;@string/action_no_gapview&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_fluview&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;@string/action_fluview&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_gridview&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;@string/action_gridview&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@+id/action_about&quot;</span><br><span class="line">        android:orderInCategory=&quot;100&quot;</span><br><span class="line">        android:title=&quot;@string/action_about&quot;</span><br><span class="line">        app:showAsAction=&quot;never&quot;/&gt;</span><br><span class="line">&lt;/menu&gt;</span><br><span class="line"></span><br><span class="line">// Activity Menu 事件处理</span><br><span class="line">@Override</span><br><span class="line">public boolean onCreateOptionsMenu(Menu menu) &#123;</span><br><span class="line">    getMenuInflater().inflate(R.menu.menu_main, menu);</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public boolean onOptionsItemSelected(MenuItem item) &#123;</span><br><span class="line">    switch (item.getItemId()) &#123;</span><br><span class="line">        case R.id.action_cardview:</span><br><span class="line">            mLayoutManager = new LinearLayoutManager(MainActivity.this,</span><br><span class="line">                    LinearLayoutManager.VERTICAL, false);</span><br><span class="line">            initRecycleView(0, mDatas, mLayoutManager);</span><br><span class="line">            break;</span><br><span class="line">        case R.id.action_no_gapview:</span><br><span class="line">            mLayoutManager = new LinearLayoutManager(MainActivity.this,</span><br><span class="line">                    LinearLayoutManager.VERTICAL, false);</span><br><span class="line">            initRecycleView(1, mDatas, mLayoutManager);</span><br><span class="line">            break;</span><br><span class="line">        case R.id.action_fluview:</span><br><span class="line">            mLayoutManager = new StaggeredGridLayoutManager(2,</span><br><span class="line">                    StaggeredGridLayoutManager.VERTICAL);</span><br><span class="line">            initRecycleView(2, mDatas, mLayoutManager);</span><br><span class="line">            break;</span><br><span class="line">        case R.id.action_gridview:</span><br><span class="line">            mLayoutManager = new GridLayoutManager(MainActivity.this, 3);</span><br><span class="line">            initRecycleView(3, mDatas, mLayoutManager);</span><br><span class="line">            break;</span><br><span class="line">        case R.id.action_about:</span><br><span class="line">            startActivity(new Intent(MainActivity.this, AboutAty.class));</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return super.onOptionsItemSelected(item);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private void initRecycleView(int flag,</span><br><span class="line">                             List&lt;NewsBean&gt; datas,</span><br><span class="line">                             RecyclerView.LayoutManager layoutManager) &#123;</span><br><span class="line">    MainPagesAdapter.layoutFlag = flag;</span><br><span class="line"></span><br><span class="line">    mMainPagesAdapter = new MainPagesAdapter(MainActivity.this, datas);</span><br><span class="line">    mRecyclerView.setAdapter(mMainPagesAdapter);</span><br><span class="line">    mRecyclerView.setLayoutManager(layoutManager);</span><br><span class="line">    mRecyclerView.setItemAnimator(new DefaultItemAnimator());//默认动画</span><br><span class="line">    mRecyclerView.setHasFixedSize(true);//效率最高</span><br><span class="line"></span><br><span class="line">    mMainPagesAdapter.setOnItemClickListener(MainActivity.this);</span><br><span class="line">    mMainPagesAdapter.setOnItemLongClickListener(MainActivity.this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p></p>
<p><strong>这样实现了基本效果, 但仍存在一个问题: Item 的标记状态存在内存中，随着 Activity 的消亡而消失; 可以考虑将数据 Bean 的标记状态存放在外部（数据库, SP, 网络等）</strong></p>
<hr>
<h2 id="用到的开源库"><a href="#用到的开源库" class="headerlink" title="用到的开源库"></a>用到的开源库</h2><p>特别感谢这些作者提供的开源库, 丰富了 Demo 功能。</p>
<blockquote>
<p><a href="https://github.com/daimajia/NumberProgressBar" target="_blank" rel="noopener">compile ‘com.daimajia.numberprogressbar:library:1.2@aar’</a><br><a href="https://github.com/bumptech/glide" target="_blank" rel="noopener">compile ‘com.github.bumptech.glide:glide:3.7.0’</a><br><a href="https://github.com/google/gson" target="_blank" rel="noopener">compile ‘com.google.code.gson:gson:2.8.0’</a><br><a href="https://github.com/afollestad/material-dialogs" target="_blank" rel="noopener">compile ‘com.afollestad.material-dialogs:commons:0.9.0.1’</a><br><a href="https://github.com/laobie/StatusBarUtil" target="_blank" rel="noopener">compile ‘com.jaeger.statusbaruitl:library:1.3.0’</a><br><a href="https://github.com/hdodenhof/CircleImageView" target="_blank" rel="noopener">compile ‘de.hdodenhof:circleimageview:2.1.0’</a></p>
</blockquote>
<hr>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] <a href="http://blog.csdn.net/lmj623565791/article/details/45059587" target="_blank" rel="noopener">http://blog.csdn.net/lmj623565791/article/details/45059587</a><br>[2] <a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2014/1118/2004.html" target="_blank" rel="noopener">http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2014/1118/2004.html</a><br>[3] <a href="http://www.loongwind.com/archives/189.html" target="_blank" rel="noopener">http://www.loongwind.com/archives/189.html</a><br>[4] <a href="http://frank-zhu.github.io/android/2015/01/16/android-recyclerview-part-1/" target="_blank" rel="noopener">http://frank-zhu.github.io/android/2015/01/16/android-recyclerview-part-1/</a><br>[5] <a href="https://github.com/Tikitoo/blog/issues/29" target="_blank" rel="noopener">https://github.com/Tikitoo/blog/issues/29</a></p>
<hr>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://o8zyn0sct.qnssl.com/googlrPhoto.jpg" alt="AbsentM">
            
              <p class="site-author-name" itemprop="name">AbsentM</p>
              <p class="site-description motion-element" itemprop="description">Avenue to Jane!</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">57</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">37</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/absentm" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/absentm123" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://weibo.com/dmicrocosmos" target="_blank" title="Weibo"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.hanhanfilm.com/" title="憨憨电影" target="_blank">憨憨电影</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.fengxiaochuang.com/" title="晓闯博客" target="_blank">晓闯博客</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">AbsentM</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Mist</a> v6.3.0</div>
        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="Total Visitors">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="Total Views">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
      <div>
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_inline_share_toolbox">
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-58d66725c4aec37d" async="async"></script>
</div>

      </div>
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  










  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("8gIMbJWMH7XprqgkEiPWXvuu-gzGzoHsz", "W9NRpyhllWph45XiJsEHVgct");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            
            counter.save(null, {
              success: function(counter) {
                
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.get('time'));
                
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            
              var newcounter = new Counter();
              /* Set ACL */
              var acl = new AV.ACL();
              acl.setPublicReadAccess(true);
              acl.setPublicWriteAccess(true);
              newcounter.setACL(acl);
              /* End Set ACL */
              newcounter.set("title", title);
              newcounter.set("url", url);
              newcounter.set("time", 1);
              newcounter.save(null, {
                success: function(newcounter) {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
                },
                error: function(newcounter, error) {
                  console.log('Failed to create');
                }
              });
            
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  
  

  

  

  

  

  

</body>
</html>